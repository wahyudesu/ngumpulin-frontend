!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="99a51966-dc25-41ec-98aa-5c1aea43441e",e._sentryDebugIdIdentifier="sentry-dbid-99a51966-dc25-41ec-98aa-5c1aea43441e")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3232],{32622:function(e,t,n){n.d(t,{O:function(){return o}});var s=n(28894),a=n(61250),r=n(22216);async function l(e,t){let{projectRef:n}=e;if(!n)throw Error("projectRef is required");let{data:s,error:r}=await (0,a.U2)("/platform/projects/{ref}/analytics/warehouse/collections",{params:{path:{ref:n}},signal:t});return r&&(0,a.S3)(r),s}let o=function(e){let{projectRef:t}=e,{enabled:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{enabled:!0};return(0,s.a)(r.d.warehouseCollections(t),e=>{let{signal:n}=e;return l({projectRef:t},n)},{enabled:n&&!!t})}},3052:function(e,t,n){n.d(t,{z:function(){return c}});var s=n(36457),a=n(64618),r=n(34549),l=n(61250),o=n(14548);async function i(e,t){let{projectRef:n,ids:s}=e,{data:a,error:r}=await (0,l.IV)("/platform/projects/{ref}/content",{headers:{Version:"2"},params:{path:{ref:n},query:{ids:s}},signal:t});return r&&(0,l.S3)(r),a.map(e=>e.id)}let c=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,s.NL)();return(0,a.D)(e=>i(e),{async onSuccess(t,n,s){let{projectRef:a}=n;await l.invalidateQueries(o.$.allContentLists(a)),await (null==e?void 0:e(t,n,s))},async onError(e,n,s){void 0===t?r.Am.error("Failed to delete contents: ".concat(e.message)):t(e,n,s)},...n})}},81543:function(e,t,n){n.d(t,{I:function(){return o}});var s=n(28894),a=n(61250),r=n(14548);async function l(e,t){let{projectRef:n,type:s}=e;if(void 0===n)throw Error("projectRef is required for getContent");let{data:r,error:l}=await (0,a.U2)("/platform/projects/{ref}/content",{params:{path:{ref:n},query:{type:s}},signal:t});if(l)throw l;return{cursor:r.cursor,content:r.data}}let o=function(e){let{projectRef:t,type:n}=e,{enabled:a=!0,...o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.a)(r.$.list(t,n),e=>{let{signal:s}=e;return l({projectRef:t,type:n},s)},{enabled:a&&void 0!==t,...o})}},76344:function(e,t,n){n.d(t,{a:function(){return r}});var s=n(64071),a=n(80398);function r(){let e=(0,a.l)(),{data:t,isLoading:n,isSuccess:r}=(0,s.Gl)({orgSlug:null==e?void 0:e.slug});return n?{plan:null,usageBillingEnabled:null,isLoading:n,isSuccess:!1}:{plan:null==t?void 0:t.plan,usageBillingEnabled:null==t?void 0:t.usage_billing_enabled,isLoading:n,isSuccess:r}}},7082:function(e,t,n){n.d(t,{Z:function(){return s}});let s=(0,n(67634).Z)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},51233:function(e,t,n){n.d(t,{Z:function(){return s}});let s=(0,n(67634).Z)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},40281:function(e,t,n){n.d(t,{Z:function(){return s}});let s=(0,n(67634).Z)("FilePlus",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]])},89837:function(e,t,n){n.d(t,{Z:function(){return b}});var s=n(97458),a=n(53995),r=n(52983),l=n(34549),o=n(45925),i=n(3052),c=n(67234),d=n(77518),u=n(587),m=n(2054),p=n(93009),x=n(96789),y=n(19168);let h=e=>{let{visible:t,onCancel:n,onSubmit:a,initialValues:r}=e;return(0,s.jsx)(m.Z,{visible:t,onCancel:n,hideFooter:!0,header:"Update saved query",size:"medium","data-sentry-element":"Modal","data-sentry-component":"UpdateSavedQueryModal","data-sentry-source-file":"Logs.UpdateSavedQueryModal.tsx",children:(0,s.jsx)(p.Z,{onReset:n,validateOnBlur:!0,initialValues:r,validate:function(e){let t={};return e.name||(t.name="Required"),t},onSubmit:a,"data-sentry-element":"Form","data-sentry-source-file":"Logs.UpdateSavedQueryModal.tsx",children:e=>{let{isSubmitting:t}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.Z.Content,{children:(0,s.jsx)(x.Z,{label:"Name",id:"name",name:"name"})}),(0,s.jsx)(m.Z.Content,{children:(0,s.jsx)(x.Z.TextArea,{label:"Description",id:"description",placeholder:"Describe query",size:"medium",textAreaClassName:"resize-none"})}),(0,s.jsx)(m.Z.Separator,{}),(0,s.jsxs)(m.Z.Content,{className:"flex items-center justify-end gap-2",children:[(0,s.jsx)(y.z,{htmlType:"reset",type:"default",onClick:n,disabled:t,children:"Cancel"}),(0,s.jsx)(y.z,{htmlType:"submit",loading:t,disabled:t,children:"Save query"})]})]})}})})};var f=n(18656),g=n(17471),j=n(7345),v=n(52115),b=e=>{let{item:t}=e,n=(0,a.useRouter)(),{ref:m}=(0,o.UO)(),[p,x]=(0,r.useState)(!1),[y,b]=(0,r.useState)(!1),{mutate:C}=(0,i.z)({onSuccess:()=>{x(!1),l.Am.success("Successfully deleted query")},onError:e=>{l.Am.error("Failed to delete saved query: ".concat(e.message))}}),{mutate:S}=(0,c.R)({onSuccess:()=>{b(!1),l.Am.success("Successfully updated query")},onError:e=>{l.Am.error("Failed to update query: ".concat(e.message))}}),w=async()=>{if(!m||"string"!=typeof m)return console.error("Invalid project reference");C({projectRef:m,ids:[t.id]})},N=async e=>{let{name:n,description:s}=e;if(!m||"string"!=typeof m)return console.error("Invalid project reference");S({projectRef:m,payload:{...t,name:n,description:s||void 0,type:"log_sql",visibility:"user"}})},k=n.query.queryId===t.id;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.k,{label:t.name,icon:(0,s.jsx)(j.vu,{size:"15"}),href:"/project/".concat(m,"/logs/explorer?queryId=").concat(encodeURIComponent(t.id),"&q=").concat(encodeURIComponent(t.content.sql)),isActive:k,dropdownItems:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(d.Xi,{onClick:()=>b(!0),children:[(0,s.jsx)(f.Z,{size:14,className:"mr-2"}),"Edit query"]}),(0,s.jsx)(d.VD,{}),(0,s.jsxs)(d.Xi,{onClick:()=>{x(!0)},children:[(0,s.jsx)(g.Z,{size:14,className:"mr-2"}),"Delete query"]})]}),"data-sentry-element":"LogsSidebarItem","data-sentry-source-file":"Logs.SavedQueriesItem.tsx"}),(0,s.jsx)(u.Z,{variant:"destructive",visible:p,confirmLabel:"Delete query",title:"Confirm to delete saved query",onCancel:()=>{x(!1)},onConfirm:w,"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"Logs.SavedQueriesItem.tsx",children:(0,s.jsxs)("p",{className:"text-sm text-foreground-light",children:["Are you sure you want to delete ",t.name,"?"]})}),(0,s.jsx)(h,{visible:y,initialValues:{name:t.name,description:t.description},onCancel:()=>{b(!1)},onSubmit:e=>{N(e)},"data-sentry-element":"UpdateSavedQueryModal","data-sentry-source-file":"Logs.SavedQueriesItem.tsx"})]})}},52115:function(e,t,n){n.d(t,{k:function(){return d}});var s=n(97458),a=n(51233),r=n(37669),l=n.n(r),o=n(5546),i=n(77518),c=n(19168);function d(e){let{label:t,icon:n,dropdownItems:r,href:d,isActive:u,onClick:m}=e;return(0,s.jsxs)("div",{className:(0,o.cn)({"bg-foreground-lighter/10":u},"relative flex [&:has([data-state=open])]:bg-foreground-lighter/10 [&:has([data-state=open])]:text-foreground hover:text-foreground hover:bg-foreground-lighter/10 transition-all text-foreground-light group"),"data-sentry-component":"LogsSidebarItem","data-sentry-source-file":"SidebarItem.tsx",children:[(0,s.jsxs)(l(),{onClick:m,href:d,className:"h-7 flex-1 text-sm px-4 flex items-center gap-2 truncate","data-sentry-element":"Link","data-sentry-source-file":"SidebarItem.tsx",children:[(0,s.jsx)("span",{children:n}),(0,s.jsx)("span",{className:"truncate",children:t})]}),r&&(0,s.jsxs)(i.h_,{children:[(0,s.jsx)(i.$F,{asChild:!0,onClick:e=>{e.preventDefault()},children:(0,s.jsx)(c.z,{type:"text",title:"Actions",className:"space-x-0 h-7 px-1.5 opacity-0 group-hover:opacity-100 !bg-transparent data-[state=open]:opacity-100",icon:(0,s.jsx)(a.Z,{size:14}),children:(0,s.jsx)("div",{className:"sr-only",children:"Actions"})})}),(0,s.jsx)(i.AW,{className:"w-48",align:"end",children:r})]})]})}},73232:function(e,t,n){n.d(t,{Z:function(){return ed}});var s=n(97458),a=n(198),r=n(33778),l=n(87790),o=n(23385),i=n(85394),c=n(82445),d=n(45925),u=n(53995),m=n(34549),p=n(36457),x=n(64618),y=n(61250),h=n(22216);async function f(e){let{projectRef:t,name:n,retention_days:s}=e,{data:a,error:r}=await (0,y.v_)("/platform/projects/{ref}/analytics/warehouse/collections",{params:{path:{ref:t}},body:{name:n,retention_days:s}});return r&&(0,y.S3)(r),a}let g=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(0,p.NL)();return(0,x.D)(e=>{var t;let n=null===(t=s.getQueryData(h.d.warehouseCollections(e.projectRef)))||void 0===t?void 0:t.map(e=>e.name);if(null==n?void 0:n.includes(e.name))throw Error("Collection with the name ".concat(e.name," already exists"));return f(e)},{async onSuccess(t,n,a){let{projectRef:r}=n;await s.invalidateQueries(h.d.warehouseCollections(r)),await (null==e?void 0:e(t,n,a))},async onError(e,n,s){void 0===t?m.Am.error("Failed to create collection: ".concat(e.message)):t(e,n,s)},...n})};var j=n(2054),v=n(78751),b=n(86848),C=n(5394),S=n(40241),w=n(40347),N=n(19168),k=n(54720),L=n(76344),M=n(61911),_=n(80398);let I=e=>{let{initialValues:t,onSubmit:n,isLoading:a,onCancelClick:r}=e,{plan:l,isLoading:o}=(0,L.a)(),i=(0,u.useRouter)(),c=(0,_.l)(),d=o?1:(null==l?void 0:l.id)==="free"?3:90,m=C.z.object({name:C.z.string().min(1),retention_days:C.z.coerce.number().min(1).max(d).multipleOf(1).positive().int()}),p=(0,b.cI)({resolver:(0,v.F)(m),defaultValues:{name:(null==t?void 0:t.name)||"",retention_days:(null==t?void 0:t.retention_days)||d}}),x=p.handleSubmit(n),y=e=>1===e?"1 day":"".concat(e," days"),h=e=>!e||e<1?(0,s.jsxs)(s.Fragment,{children:["Your plan allows for a maximum of ",y(d),"."]}):(0,s.jsxs)(s.Fragment,{children:["Your logs will be removed after ",y(e),". ",(0,s.jsx)("br",{}),"Your plan allows for a maximum of ",y(d),"."]});return(0,s.jsx)(S.l0,{...p,"data-sentry-element":"Form_Shadcn_","data-sentry-component":"CollectionForm","data-sentry-source-file":"CollectionForm.tsx",children:(0,s.jsxs)("form",{onSubmit:x,children:[(0,s.jsxs)(j.Z.Content,{className:"space-y-3","data-sentry-element":"unknown","data-sentry-source-file":"CollectionForm.tsx",children:[(0,s.jsx)(S.Wi,{control:p.control,name:"name",render:e=>{let{field:t}=e;return(0,s.jsx)(k.E,{label:"Collection name",layout:"horizontal",children:(0,s.jsx)(S.NI,{children:(0,s.jsx)(w.I,{autoFocus:!0,placeholder:"Events",...t})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"CollectionForm.tsx"}),(0,s.jsx)(S.Wi,{control:p.control,name:"retention_days",render:e=>{let{field:t}=e;return(0,s.jsx)(k.E,{label:"Retention",layout:"horizontal",description:h(Number(t.value)),children:(0,s.jsx)(S.NI,{children:(0,s.jsxs)("div",{className:"relative flex items-center gap-2",children:[(0,s.jsx)(w.I,{type:"number",...t}),(0,s.jsx)("span",{className:"absolute right-3 text-foreground-lighter text-sm pointer-events-none",children:"days"})]})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"CollectionForm.tsx"})]}),(null==l?void 0:l.id)==="free"&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.Z.Separator,{}),(0,s.jsx)(M.J,{className:"border-none bg-transparent",type:"default",title:"Upgrade your plan to increase retention",description:(0,s.jsxs)("div",{children:["Upgrade to the pro plan to increase retention to 90 days.",(0,s.jsx)(N.z,{className:"mt-2",type:"primary",onClick:()=>i.push("/org/".concat(null==c?void 0:c.slug,"/billing?panel=subscriptionPlan")),children:"Upgrade plan"})]})})]}),(0,s.jsx)(S.zG,{"data-sentry-element":"FormMessage_Shadcn_","data-sentry-source-file":"CollectionForm.tsx"}),(0,s.jsxs)(j.Z.Content,{className:"py-4 border-t flex items-center justify-end gap-2","data-sentry-element":"unknown","data-sentry-source-file":"CollectionForm.tsx",children:[(0,s.jsx)(N.z,{size:"tiny",type:"default",onClick:r,"data-sentry-element":"Button","data-sentry-source-file":"CollectionForm.tsx",children:"Cancel"}),(0,s.jsx)(N.z,{size:"tiny",loading:a,disabled:a,htmlType:"submit","data-sentry-element":"Button","data-sentry-source-file":"CollectionForm.tsx",children:"Create collection"})]})]})})},F=e=>{let{open:t,onOpenChange:n}=e,a=(0,u.useRouter)(),{ref:r}=(0,d.UO)(),{mutate:l,isLoading:o}=g({onSuccess:e=>{n(!1),m.Am.success("Collection created successfully"),a.push("/project/".concat(r,"/logs/collections/").concat(e.token))},onError:e=>{m.Am.error(e.message)}});return(0,s.jsx)(j.Z,{size:"medium",onCancel:()=>n(!1),header:"Create collection",visible:t,hideFooter:!0,"data-sentry-element":"Modal","data-sentry-component":"CreateWarehouseCollectionModal","data-sentry-source-file":"CreateWarehouseCollection.tsx",children:(0,s.jsx)(I,{onCancelClick:()=>n(!1),isLoading:o,onSubmit:e=>{r&&l({projectRef:r,name:e.name,retention_days:e.retention_days})},"data-sentry-element":"CollectionForm","data-sentry-source-file":"CreateWarehouseCollection.tsx"})})};var A=n(7082),Z=n(18656),z=n(17471),V=n(52983);async function q(e){let{projectRef:t,collectionToken:n}=e,{data:s,error:a}=await (0,y.IV)("/platform/projects/{ref}/analytics/warehouse/collections/{token}",{params:{path:{ref:t,token:n}}});return a&&(0,y.S3)(a),s}let R=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(0,p.NL)();return(0,x.D)(e=>q(e),{async onSuccess(t,n,a){let{projectRef:r}=n;await s.invalidateQueries(h.d.warehouseCollections(r)),await (null==e?void 0:e(t,n,a))},async onError(e,n,s){void 0===t?m.Am.error("Failed to delete collection: ".concat(e.message)):t(e,n,s)},...n})};async function D(e,t){let{projectRef:n,collectionToken:s}=e,{data:a,error:r}=await (0,y.r$)("/platform/projects/{ref}/analytics/warehouse/collections/{token}",{params:{path:{ref:n,token:s}},body:t});return r&&(0,y.S3)(r),a}let E=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(0,p.NL)();return(0,x.D)(e=>D({projectRef:e.projectRef,collectionToken:e.collectionToken},{name:e.name,retention_days:e.retention_days}),{async onSuccess(t,n,a){let{projectRef:r}=n;await s.invalidateQueries(h.d.warehouseCollections(r)),await (null==e?void 0:e(t,n,a))},async onError(e,n,s){void 0===t?m.Am.error("Failed to update collection: ".concat(e.message)):t(e,n,s)},...n})};var T=n(77518),U=n(52115),Q=n(587);let W=e=>{let{item:t}=e,n=(0,u.useRouter)(),{ref:r,collectionToken:o}=(0,d.UO)(),i=r||"default",[p,x]=(0,V.useState)(!1),[y,h]=(0,V.useState)(!1),f=(0,l.Xo)(a.KA.ANALYTICS_WRITE,"logflare"),g=E({onSuccess:()=>{m.Am.success("Collection updated successfully"),x(!1)}}),v=R({onSuccess:()=>{t.token===o&&n.push("/project/".concat(i,"/logs/explorer")),h(!1),m.Am.success("Collection deleted successfully")}}),b=g.isLoading||v.isLoading;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(U.k,{isActive:t.token===o,label:t.name,icon:(0,s.jsx)(A.Z,{size:"14",className:"text-foreground-light"}),href:"/project/".concat(i,"/logs/collections/").concat(t.token),dropdownItems:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(c.u,{children:[(0,s.jsx)(c.aJ,{asChild:!0,children:(0,s.jsxs)(T.Xi,{disabled:!f,onClick:e=>{e.preventDefault(),x(!0)},children:[(0,s.jsx)(Z.Z,{className:"mr-2",size:14}),(0,s.jsx)("div",{children:"Update collection"})]})}),!f&&(0,s.jsx)(c._v,{side:"right",children:"You need additional permissions to update collections"})]}),(0,s.jsx)(T.VD,{}),(0,s.jsxs)(c.u,{children:[(0,s.jsx)(c.aJ,{asChild:!0,children:(0,s.jsxs)(T.Xi,{disabled:!f,onClick:e=>{e.preventDefault(),h(!0)},children:[(0,s.jsx)(z.Z,{className:"mr-2",size:14}),(0,s.jsx)("div",{children:"Delete collection"})]})}),!f&&(0,s.jsx)(c._v,{side:"right",children:"You need additional permissions to delete collections"})]})]}),"data-sentry-element":"LogsSidebarItem","data-sentry-source-file":"WarehouseMenuItem.tsx"}),(0,s.jsx)(j.Z,{size:"medium",visible:p,onCancel:()=>x(!1),hideFooter:!0,header:'Update collection "'.concat(t.name,'"'),"data-sentry-element":"Modal","data-sentry-source-file":"WarehouseMenuItem.tsx",children:(0,s.jsx)(I,{onCancelClick:()=>x(!1),isLoading:b,initialValues:{name:t.name,retention_days:t.retention_days},onSubmit:e=>{let{name:n,retention_days:s}=e;g.mutate({projectRef:i,collectionToken:t.token,name:n,retention_days:s})},"data-sentry-element":"CollectionForm","data-sentry-source-file":"WarehouseMenuItem.tsx"})}),(0,s.jsx)(Q.Z,{variant:"destructive",visible:y,onCancel:()=>h(!1),confirmLabel:"Delete collection",title:'Delete collection "'.concat(t.name,'"'),size:"small",onConfirm:()=>{v.mutate({projectRef:i,collectionToken:t.token})},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"WarehouseMenuItem.tsx",children:(0,s.jsxs)("p",{className:"text-sm text-foreground-light",children:["All data in this collection will be deleted.",(0,s.jsx)("br",{}),(0,s.jsx)("div",{className:"mt-2",children:"This action cannot be undone."})]})})]})};var P=n(89837),O=n(32622),Y=n(28894);async function B(e,t){let{projectRef:n}=e;if(!n)throw Error("projectRef is required");let{data:s,error:a}=await (0,y.U2)("/platform/projects/{ref}/analytics/warehouse/tenant",{params:{path:{ref:n}},signal:t});return a&&(0,y.S3)(a),s}let X=function(e){let{projectRef:t}=e,{enabled:n=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,Y.a)(h.d.warehouseTenant(t),e=>{let{signal:n}=e;return B({projectRef:t},n)},{enabled:n&&!!t,staleTime:1/0,cacheTime:72e5,refetchOnMount:!1,refetchInterval:!1,...s})};var H=n(81543),$=n(55604),J=n(67983),G=n(79429),K=n(81449),ee=n(40281),et=n(37669),en=n.n(et),es=n(20821),ea=n(44273),er=n(97834),el=n(88586);let eo=e=>{let{className:t}=e;return(0,s.jsx)("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",height:"15px",width:"15px",className:t,xmlns:"http://www.w3.org/2000/svg","data-sentry-element":"svg","data-sentry-component":"SupaIcon","data-sentry-source-file":"LogsSidebarMenuV2.tsx",children:(0,s.jsx)("path",{d:"M10.9997 2.59833V13.9694H3.90013C3.23055 13.9694 2.83063 13.1846 3.25654 12.6326L10.9997 2.59833ZM12.9997 8.03061V2.33296C12.9997 0.521514 10.7034 -0.291434 9.58194 1.16185L1.67316 11.4108C0.246185 13.26 1.54768 15.9694 3.90013 15.9694H10.9997V21.6671C10.9997 23.4785 13.296 24.2915 14.4175 22.8382L22.3262 12.5892C23.7532 10.74 22.4517 8.03061 20.0993 8.03061H12.9997ZM12.9997 10.0306H20.0993C20.7688 10.0306 21.1688 10.8155 20.7429 11.3674L12.9997 21.4017V10.0306Z","data-sentry-element":"path","data-sentry-source-file":"LogsSidebarMenuV2.tsx"})})};function ei(e){let{children:t,title:n,defaultOpen:a}=e;return(0,s.jsxs)(es.zF,{defaultOpen:a,"data-sentry-element":"Collapsible_Shadcn_","data-sentry-component":"SidebarCollapsible","data-sentry-source-file":"LogsSidebarMenuV2.tsx",children:[(0,s.jsxs)(es.wy,{className:"flex items-center gap-x-2 px-4 [&[data-state=open]>svg]:!rotate-90 pb-2","data-sentry-element":"CollapsibleTrigger_Shadcn_","data-sentry-source-file":"LogsSidebarMenuV2.tsx",children:[(0,s.jsx)(G.Z,{size:16,className:"text-foreground-light transition-transform duration-200","data-sentry-element":"ChevronRight","data-sentry-source-file":"LogsSidebarMenuV2.tsx"}),(0,s.jsx)("span",{className:"text-foreground-light font-mono text-sm uppercase",children:n})]}),(0,s.jsx)(es.Fw,{"data-sentry-element":"CollapsibleContent_Shadcn_","data-sentry-source-file":"LogsSidebarMenuV2.tsx",children:t})]})}function ec(){var e;let[t,n]=(0,V.useState)(""),[r,o]=(0,V.useState)(!1),i=(0,l.Xo)(a.KA.ANALYTICS_WRITE,"logflare"),m=(0,u.useRouter)(),{ref:p}=(0,d.UO)(),{data:x}=X({projectRef:p}),{projectAuthAll:y,projectStorageAll:h,realtimeAll:f}=(0,$.N)(["project_storage:all","project_auth:all","realtime:all"]),g=(0,J.P)("warehouse"),{data:j,isLoading:v}=(0,O.O)({projectRef:p},{enabled:d.Qy&&g&&!!x}),{data:b,isLoading:C}=(0,H.I)({projectRef:p,type:"log_sql"}),S=[...null!==(e=null==b?void 0:b.content)&&void 0!==e?e:[]].filter(e=>"log_sql"===e.type).sort((e,t)=>e.name.localeCompare(t.name));function w(e){return m.asPath.includes(e)}let k=[{name:"API Gateway",key:"edge-logs",url:"/project/".concat(p,"/logs/edge-logs"),items:[]},{name:"Postgres",key:"postgres-logs",url:"/project/".concat(p,"/logs/postgres-logs"),items:[]},{name:"PostgREST",key:"postgrest-logs",url:"/project/".concat(p,"/logs/postgrest-logs"),items:[]},d.Qy?{name:"Pooler",key:"pooler-logs",url:"/project/".concat(p,"/logs/pooler-logs"),items:[]}:null,,y?{name:"Auth",key:"auth-logs",url:"/project/".concat(p,"/logs/auth-logs"),items:[]}:null,h?{name:"Storage",key:"storage-logs",url:"/project/".concat(p,"/logs/storage-logs"),items:[]}:null,f?{name:"Realtime",key:"realtime-logs",url:"/project/".concat(p,"/logs/realtime-logs"),items:[]}:null,{name:"Edge Functions",key:"edge-functions-logs",url:"/project/".concat(p,"/logs/edge-functions-logs"),items:[]},{name:"Cron",key:"pg_cron",url:"/project/".concat(p,"/logs/pgcron-logs"),items:[]}].filter(e=>null==e?void 0:e.name.toLowerCase().includes(t.toLowerCase())),L=null==j?void 0:j.filter(e=>e.name.toLowerCase().includes(t.toLowerCase()));return(0,s.jsxs)("div",{className:"pb-12 relative","data-sentry-component":"LogsSidebarMenuV2","data-sentry-source-file":"LogsSidebarMenuV2.tsx",children:[(0,s.jsxs)("div",{className:"flex gap-2 p-4 items-center sticky top-0 bg-background-200 z-[1]",children:[(0,s.jsx)(er.nM,{className:"w-full p-0 gap-0","data-sentry-element":"InnerSideBarFilters","data-sentry-source-file":"LogsSidebarMenuV2.tsx",children:(0,s.jsx)(er.nn,{name:"search-collections",placeholder:"Search collections...","aria-labelledby":"Search collections",value:t,onChange:e=>n(e.target.value),"data-sentry-element":"InnerSideBarFilterSearchInput","data-sentry-source-file":"LogsSidebarMenuV2.tsx"})}),(0,s.jsxs)(T.h_,{"data-sentry-element":"DropdownMenu","data-sentry-source-file":"LogsSidebarMenuV2.tsx",children:[(0,s.jsx)(T.$F,{asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"LogsSidebarMenuV2.tsx",children:(0,s.jsx)(N.z,{type:"default",icon:(0,s.jsx)(K.Z,{className:"text-foreground"}),className:"w-[26px]","data-sentry-element":"Button","data-sentry-source-file":"LogsSidebarMenuV2.tsx"})}),(0,s.jsxs)(T.AW,{align:"end",className:"w-48","data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"LogsSidebarMenuV2.tsx",children:[(0,s.jsx)(T.Xi,{className:"gap-x-2",asChild:!0,"data-sentry-element":"DropdownMenuItem","data-sentry-source-file":"LogsSidebarMenuV2.tsx",children:(0,s.jsxs)(en(),{href:"/project/".concat(p,"/logs/explorer"),"data-sentry-element":"Link","data-sentry-source-file":"LogsSidebarMenuV2.tsx",children:[(0,s.jsx)(ee.Z,{size:14,"data-sentry-element":"FilePlus","data-sentry-source-file":"LogsSidebarMenuV2.tsx"}),"Create query"]})}),g&&(0,s.jsxs)(c.u,{children:[(0,s.jsx)(c.aJ,{asChild:!0,children:(0,s.jsx)(T.Xi,{className:"gap-x-2",asChild:!0,children:(0,s.jsxs)("button",{onClick:()=>o(!0),className:"w-full flex items-center text-xs px-2 py-1",disabled:!i,children:[(0,s.jsx)(K.Z,{size:14}),"Create collection"]})})}),!i&&(0,s.jsx)(c._v,{children:"You need additional permissions to create a collection"})]})]})]}),(0,s.jsx)(F,{open:r,onOpenChange:o,"data-sentry-element":"CreateWarehouseCollectionModal","data-sentry-source-file":"LogsSidebarMenuV2.tsx"})]}),(0,s.jsx)("div",{className:"px-2",children:(0,s.jsx)(er.DS,{title:"Templates",isActive:w("/project/".concat(p,"/logs/explorer/templates")),href:"/project/".concat(p,"/logs/explorer/templates"),"data-sentry-element":"InnerSideMenuItem","data-sentry-source-file":"LogsSidebarMenuV2.tsx",children:"Templates"})}),(0,s.jsx)(ea.Z,{className:"my-4","data-sentry-element":"Separator","data-sentry-source-file":"LogsSidebarMenuV2.tsx"}),(0,s.jsxs)(ei,{title:"Collections",defaultOpen:!0,"data-sentry-element":"SidebarCollapsible","data-sentry-source-file":"LogsSidebarMenuV2.tsx",children:[k.map(e=>{var t,n,a;return(0,s.jsx)(U.k,{isActive:w(null!==(t=null==e?void 0:e.url)&&void 0!==t?t:""),href:null!==(n=null==e?void 0:e.url)&&void 0!==n?n:"",icon:(0,s.jsx)(eo,{className:"text-foreground-light"}),label:null!==(a=null==e?void 0:e.name)&&void 0!==a?a:""},null==e?void 0:e.key)}),v&&g?(0,s.jsx)("div",{className:"p-4",children:(0,s.jsx)(el.A,{})}):(null==L?void 0:L.length)?(0,s.jsx)("div",{children:L.map(e=>(0,s.jsx)(W,{item:e},e.token))}):null]}),(0,s.jsx)(ea.Z,{className:"my-4","data-sentry-element":"Separator","data-sentry-source-file":"LogsSidebarMenuV2.tsx"}),(0,s.jsxs)(ei,{title:"Queries",defaultOpen:!0,"data-sentry-element":"SidebarCollapsible","data-sentry-source-file":"LogsSidebarMenuV2.tsx",children:[C&&(0,s.jsx)("div",{className:"p-4",children:(0,s.jsx)(el.A,{})}),0===S.length&&(0,s.jsx)(er.Cf,{className:"mx-4",title:"No queries created yet",description:"Create and save your queries to use them in the explorer",actions:(0,s.jsx)(N.z,{asChild:!0,type:"default",children:(0,s.jsx)(en(),{href:"/project/".concat(p,"/logs/explorer"),children:"Create query"})})}),S.map(e=>(0,s.jsx)(P.Z,{item:e},e.id))]})]})}var ed=(0,o.Q)(e=>{let{title:t,children:n}=e;return(0,l.Xo)(a.KA.ANALYTICS_READ,"logflare")?(0,s.jsx)(i.Z,{title:t,product:"Logs & Analytics",productMenu:(0,s.jsx)(ec,{}),"data-sentry-element":"ProjectLayout","data-sentry-component":"LogsLayout","data-sentry-source-file":"LogsLayout.tsx",children:n}):(0,s.jsx)(i.Z,{children:(0,s.jsx)(r.Z,{isFullPage:!0,resourceText:"access your project's logs explorer"})})})},33778:function(e,t,n){var s=n(97458),a=n(71794);t.Z=e=>{let{resourceText:t,isFullPage:n=!1}=e,r=()=>(0,s.jsx)("div",{className:"block w-full rounded border border-opacity-20 py-4 px-6 border-overlay bg-surface-200","data-sentry-component":"NoPermissionMessage","data-sentry-source-file":"NoPermission.tsx",children:(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("div",{className:"mt-1",children:(0,s.jsx)(a.Z,{size:20,"data-sentry-element":"AlertCircle","data-sentry-source-file":"NoPermission.tsx"})}),(0,s.jsx)("div",{className:"flex w-full items-center justify-between",children:(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("p",{className:"text-sm",children:["You need additional permissions to ",t]}),(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"Contact your organization owner or administrator for assistance."})})]})})]})});return n?(0,s.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,s.jsx)("div",{className:"w-[550px]",children:(0,s.jsx)(r,{})})}):(0,s.jsx)(r,{})}}}]);