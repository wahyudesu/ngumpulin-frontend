!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="9c58dd4f-8879-4bec-89a9-601e5c08052b",e._sentryDebugIdIdentifier="sentry-dbid-9c58dd4f-8879-4bec-89a9-601e5c08052b")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3327],{75154:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/projects",function(){return s(68050)}])},99365:function(e,t,s){"use strict";s.d(t,{l:function(){return P}});var r=s(97458),n=s(39907),i=s.n(n),a=s(81449),o=s(37669),l=s.n(o),c=s(61223),d=s(21371),u=s(86355),g=s(68608),x=s(503),p=s(81603),h=s(11100),m=s(6641),f=s(37417),j=s(4093),v=s(55604),y=s(77946),N=s(47878),_=s(5546),b=s(19168),w=s(81657),C=s(20030),P=e=>{let{search:t,rewriteHref:s,filterStatus:n,resetFilterStatus:a}=e,{data:o,isLoading:l,isSuccess:c}=(0,h.tl)(),{data:u,isLoading:g,isSuccess:x,isError:v,error:N}=(0,f.Sy)(),{isLoading:w,isError:P,error:A}=(0,m.j)(),{data:E}=(0,j.q)(),{data:z}=(0,p.E)(),H=i()(u,"organization_id"),Z=!!y.Qy&&w,L=void 0!==n&&2!==n.length,k=t.length>0&&x&&0===u.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())||e.ref.includes(t.toLowerCase())).length,T=L&&x&&0===u.filter(e=>n.includes(e.status)).length;return l?(0,r.jsxs)("ul",{className:"mx-auto grid grid-cols-1 gap-4 sm:grid-cols-1 md:grid-cols-1 lg:grid-cols-2 xl:grid-cols-3",children:[(0,r.jsx)(C.Z,{}),(0,r.jsx)(C.Z,{})]}):k?(0,r.jsx)(d.Z,{searchString:t}):T?(0,r.jsxs)("div",{className:(0,_.cn)("bg-surface-100 border border-default px-6 py-4 rounded flex items-center justify-between"),children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("p",{className:"text-sm text-foreground",children:0===n.length?"No projects found":"No ".concat("INACTIVE"===n[0]?"paused":"active"," projects found")}),(0,r.jsx)("p",{className:"text-sm text-foreground-light",children:"Your search for projects with the specified status did not return any results"})]}),void 0!==a&&(0,r.jsx)(b.z,{type:"default",onClick:()=>a(),children:"Reset filter"})]}):c&&o&&(null==o?void 0:o.length)>0?(0,r.jsx)(r.Fragment,{children:null==o?void 0:o.map(e=>(0,r.jsx)(S,{organization:e,projects:H[e.id],overdueInvoices:(null!=z?z:[]).filter(t=>t.organization_id===e.id),resourceWarnings:null!=E?E:[],rewriteHref:s,isLoadingPermissions:Z,isErrorPermissions:P,permissionsError:A,isLoadingProjects:g,isErrorProjects:v,projectsError:N,search:t,filterStatus:n},e.slug))}):(0,r.jsx)(I,{slug:""})};let S=e=>{let{organization:t,projects:s,overdueInvoices:n,resourceWarnings:i,isLoadingPermissions:a,isErrorPermissions:o,permissionsError:d,isLoadingProjects:p,isErrorProjects:h,projectsError:m,rewriteHref:f,search:j,filterStatus:v}=e,y=!s||0===s.length,_=[...s||[]].sort((e,t)=>e.name.localeCompare(t.name)),P=j.length>0?_.filter(e=>e.name.toLowerCase().includes(j.toLowerCase())||e.ref.includes(j.toLowerCase())):_,S=void 0!==v?2===v.length?P:P.filter(e=>v.includes(e.status)):P,{data:A}=(0,x.T)({orgSlug:null==t?void 0:t.slug}),{data:E}=(0,g.q)({organizationId:null==t?void 0:t.id}),z=null==E?void 0:E.map(e=>{var t,s,r,n,i;return{id:String(e.id),added_by:{id:String(null===(t=e.user)||void 0===t?void 0:t.id),primary_email:null!==(n=null===(s=e.user)||void 0===s?void 0:s.primary_email)&&void 0!==n?n:"",username:null!==(i=null===(r=e.user)||void 0===r?void 0:r.username)&&void 0!==i?i:""},foreign_project_id:String(e.repository.id),supabase_project_ref:e.project.ref,organization_integration_id:"unused",inserted_at:e.inserted_at,updated_at:e.updated_at,metadata:{name:e.repository.name}}}),H=null==A?void 0:A.filter(e=>"Vercel"===e.integration.name).flatMap(e=>e.connections);return(j.length>0||void 0!==v&&2!==v.length)&&0===S.length?null:(0,r.jsxs)("div",{className:"space-y-3","data-sentry-component":"OrganizationProjects","data-sentry-source-file":"ProjectList.tsx",children:[(0,r.jsxs)("div",{className:"flex space-x-4 items-center",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("h4",{className:"text-lg flex items-center",children:t.name})," ",(0,r.jsx)(u.Z,{organization:t,"data-sentry-element":"PartnerIcon","data-sentry-source-file":"ProjectList.tsx"})]}),!!n.length&&(0,r.jsx)("div",{children:(0,r.jsx)(b.z,{asChild:!0,type:"danger",children:(0,r.jsx)(l(),{href:"/org/".concat(t.slug,"/invoices"),children:"Outstanding Invoices"})})}),(null==t?void 0:t.restriction_status)==="grace_period"&&(0,r.jsx)("div",{children:(0,r.jsx)(b.z,{asChild:!0,type:"warning",children:(0,r.jsx)(l(),{href:"/org/".concat(t.slug,"/billing"),children:"Grace Period"})})}),(null==t?void 0:t.restriction_status)==="grace_period_over"&&(0,r.jsx)("div",{children:(0,r.jsx)(b.z,{asChild:!0,type:"warning",children:(0,r.jsx)(l(),{href:"/org/".concat(t.slug,"/billing"),children:"Grace Period Over"})})}),(null==t?void 0:t.restriction_status)==="restricted"&&(0,r.jsx)("div",{children:(0,r.jsx)(b.z,{asChild:!0,type:"danger",children:(0,r.jsx)(l(),{href:"/org/".concat(t.slug,"/billing"),children:"Services Restricted"})})})]}),a||p?(0,r.jsxs)("ul",{className:"mx-auto grid grid-cols-1 gap-4 sm:grid-cols-1 md:grid-cols-1 lg:grid-cols-2 xl:grid-cols-3",children:[(0,r.jsx)(C.Z,{}),(0,r.jsx)(C.Z,{})]}):(0,r.jsx)("ul",{className:"mx-auto grid grid-cols-1 gap-4 sm:grid-cols-1 md:grid-cols-1 lg:grid-cols-2 xl:grid-cols-3",children:o?(0,r.jsx)("div",{className:"col-span-3",children:(0,r.jsx)(c.Z,{subject:"Failed to retrieve permissions for your account",error:d})}):h?(0,r.jsx)("div",{className:"col-span-3",children:(0,r.jsx)(c.Z,{subject:"Failed to retrieve projects under ".concat(name),error:m})}):y?(0,r.jsx)(I,{slug:t.slug}):null==S?void 0:S.map(e=>(0,r.jsx)(w.Z,{project:e,rewriteHref:f?f(e.ref):void 0,resourceWarnings:i.find(t=>t.project===e.ref),githubIntegration:null==z?void 0:z.find(t=>t.supabase_project_ref===e.ref),vercelIntegration:null==H?void 0:H.find(t=>t.supabase_project_ref===e.ref)},(0,N.pZ)(5)))})]},t.slug)},I=e=>{let{slug:t}=e,s=(0,v.N)("projects:create");return(0,r.jsxs)("div",{className:"col-span-4 space-y-4 rounded-lg border border-dashed p-6 text-center","data-sentry-component":"NoProjectsState","data-sentry-source-file":"ProjectList.tsx",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("p",{children:"No projects"}),(0,r.jsx)("p",{className:"text-sm text-foreground-light",children:"Get started by creating a new project."})]}),s&&(0,r.jsx)(b.z,{asChild:!0,icon:(0,r.jsx)(a.Z,{}),children:(0,r.jsx)(l(),{href:"/new/".concat(t),children:"New Project"})})]})}},81603:function(e,t,s){"use strict";s.d(t,{E:function(){return l}});var r=s(28894),n=s(61250),i=s(65083),a=s(77946);async function o(e){let{data:t,error:s}=await (0,n.U2)("/platform/stripe/invoices/overdue",{signal:e});return s&&(0,n.S3)(s),t}let l=function(){let{enabled:e=!0,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.a)(i.Y.overdueInvoices(),e=>{let{signal:t}=e;return o(t)},{enabled:e&&a.Qy,...t})}},65083:function(e,t,s){"use strict";s.d(t,{Y:function(){return r}});let r={overdueInvoices:()=>["invoices","overdue"],invoice:e=>["invoice",e],list:(e,t)=>["invoices",e,t],count:e=>["invoices",e,"count"],listAndCount:e=>["invoices",e],projectInvoices:(e,t)=>["invoices",e,t],projectInvoicesCount:e=>["invoices",e,"count"],orgUpcomingPreview:e=>["invoices",e,"upcoming-preview"]}},4093:function(e,t,s){"use strict";s.d(t,{q:function(){return l}});var r=s(28894),n=s(45925),i=s(61250),a=s(53230);async function o(e){let{data:t,error:s}=await (0,i.U2)("/platform/projects-resource-warnings",{signal:e});return s&&(0,i.S3)(s),t}let l=function(){let{enabled:e=!0,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.a)(a.Z.resourceWarnings(),e=>{let{signal:t}=e;return o(t)},{enabled:n.Qy&&e,staleTime:18e5,...t})}},6303:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(67634).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},21371:function(e,t,s){"use strict";var r=s(97458),n=s(5546),i=s(19168);t.Z=e=>{let{searchString:t,onResetFilter:s,className:a}=e;return(0,r.jsxs)("div",{className:(0,n.cn)("bg-surface-100 border border-default px-6 py-4 rounded flex items-center justify-between",a),"data-sentry-component":"NoSearchResults","data-sentry-source-file":"NoSearchResults.tsx",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("p",{className:"text-sm text-foreground",children:"No results found"}),(0,r.jsxs)("p",{className:"text-sm text-foreground-light",children:['Your search for "',t,'" did not return any results']})]}),void 0!==s&&(0,r.jsx)(i.z,{type:"default",onClick:()=>s(),children:"Reset filter"})]})}},68050:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return S}});var r=s(97458),n=s(53995),i=s(52983),a=s(99365),o=s(78854),l=s(6303),c=s(37669),d=s.n(c),u=s(45925),g=s(11100),x=s(55604),p=s(77946),h=s(7097),m=s(77518),f=s(19168),j=s(96789),v=s(41341),y=s(65497),N=s(27037),_=e=>{let{organizations:t=h.Z6,search:s,filterStatus:i,setSearch:a,setFilterStatus:c}=e,_=(0,n.useRouter)(),b=(0,x.N)("organizations:create"),{isSuccess:w}=(0,g.tl)();return(0,r.jsxs)("div",{className:"flex flex-col gap-2 md:gap-3 md:flex-row","data-sentry-component":"HomePageActions","data-sentry-source-file":"HomePageActions.tsx",children:[(0,r.jsxs)(m.h_,{"data-sentry-element":"DropdownMenu","data-sentry-source-file":"HomePageActions.tsx",children:[(0,r.jsx)(m.$F,{asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"HomePageActions.tsx",children:(0,r.jsx)(f.z,{type:"primary","data-sentry-element":"Button","data-sentry-source-file":"HomePageActions.tsx",children:(0,r.jsx)("span",{children:"New project"})})}),(0,r.jsx)(m.AW,{side:"bottom",align:"center","data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"HomePageActions.tsx",children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Ju,{"data-sentry-element":"DropdownMenuLabel","data-sentry-source-file":"HomePageActions.tsx",children:"Choose organization"}),t.sort((e,t)=>e.name.localeCompare(t.name)).map(e=>(0,r.jsx)(m.Xi,{onClick:()=>_.push("/new/".concat(e.slug)),children:e.name},e.slug))]})})]}),u.Qy&&b&&w&&(0,r.jsx)(f.z,{type:"default",asChild:!0,children:(0,r.jsx)(d(),{href:"/new",className:"flex items-center gap-2",children:"New organization"})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(j.Z,{size:"tiny",placeholder:"Search for a project",icon:(0,r.jsx)(o.Z,{size:16}),className:"w-full flex-1 md:w-64 [&>div>div>div>input]:!pl-7 [&>div>div>div>div]:!pl-2",value:s,onChange:e=>a(e.target.value),"data-sentry-element":"Input","data-sentry-source-file":"HomePageActions.tsx"}),(0,r.jsxs)(v.J2,{"data-sentry-element":"Popover_Shadcn_","data-sentry-source-file":"HomePageActions.tsx",children:[(0,r.jsx)(v.xo,{asChild:!0,"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"HomePageActions.tsx",children:(0,r.jsx)(f.z,{type:2!==i.length?"secondary":"dashed",className:"h-[26px] w-[26px]",icon:(0,r.jsx)(l.Z,{}),"data-sentry-element":"Button","data-sentry-source-file":"HomePageActions.tsx"})}),(0,r.jsx)(v.yk,{className:"p-0 w-56",side:"bottom",align:"center","data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"HomePageActions.tsx",children:(0,r.jsxs)("div",{className:"px-3 pt-3 pb-2 flex flex-col gap-y-2",children:[(0,r.jsx)("p",{className:"text-xs",children:"Filter projects by status"}),(0,r.jsx)("div",{className:"flex flex-col",children:[{key:p.S.ACTIVE_HEALTHY,label:"Active"},{key:p.S.INACTIVE,label:"Paused"}].map(e=>{let{key:t,label:s}=e;return(0,r.jsxs)("div",{className:"group flex items-center justify-between py-0.5",children:[(0,r.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,r.jsx)(y.X,{id:t,name:t,checked:i.includes(t),onCheckedChange:()=>{i.includes(t)?c(i.filter(e=>e!==t)):c(i.concat([t]))}}),(0,r.jsx)(N._,{htmlFor:t,className:"capitalize text-xs",children:s})]}),(0,r.jsx)(f.z,{size:"tiny",type:"default",onClick:()=>c([t]),className:"transition opacity-0 group-hover:opacity-100 h-auto px-1 py-0.5",children:"Select only"})]},t)})})]})})]})]})]})},b=s(47407),w=s(61223),C=s(37417);let P=()=>{let e=(0,n.useRouter)(),[t,s]=(0,i.useState)(""),[o,l]=(0,i.useState)([p.S.ACTIVE_HEALTHY,p.S.INACTIVE]),{data:c,isError:d,isSuccess:u}=(0,g.tl)();(0,C.sc)();let h=(0,x.N)("projects:create");return(0,i.useEffect)(()=>{if(u){let t=0===c.length,s=localStorage.getItem(p.dA.UI_ONBOARDING_NEW_PAGE_SHOWN);t&&!s&&(localStorage.setItem(p.dA.UI_ONBOARDING_NEW_PAGE_SHOWN,"true"),e.push("/new"))}},[u,!0]),(0,r.jsxs)(r.Fragment,{children:[d&&(0,r.jsx)("div",{className:"py-4 px-5",children:(0,r.jsx)(w.Z,{subject:"Failed to retrieve organizations"})}),(0,r.jsxs)("div",{className:"p-5",children:[p.Qy&&h&&u&&(0,r.jsx)(_,{search:t,filterStatus:o,setSearch:s,setFilterStatus:l,organizations:c}),(0,r.jsx)("div",{className:"my-6 space-y-8",children:(0,r.jsx)(a.l,{search:t,filterStatus:o,resetFilterStatus:()=>l(["ACTIVE_HEALTHY","INACTIVE"]),"data-sentry-element":"ProjectList","data-sentry-source-file":"projects.tsx"})})]})]})};P.getLayout=e=>(0,r.jsx)(b.Z,{title:"Dashboard",breadcrumbs:[{key:"supabase-projects",label:"Projects"}],children:e});var S=P}},function(e){e.O(0,[1885,588,520,2597,9505,3351,6019,7191,2594,175,5472,9885,495,7546,7407,628,9774,2888,179],function(){return e(e.s=75154)}),_N_E=e.O()}]);