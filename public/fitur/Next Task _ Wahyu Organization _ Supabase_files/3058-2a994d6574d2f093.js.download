!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="e8a0f5d6-9329-4ae5-a0aa-ad195f856b8a",e._sentryDebugIdIdentifier="sentry-dbid-e8a0f5d6-9329-4ae5-a0aa-ad195f856b8a")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3058],{87608:function(e,t){var n;!function(){"use strict";var a={}.hasOwnProperty;function s(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n)){if(n.length){var o=s.apply(null,n);o&&e.push(o)}}else if("object"===r){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var i in n)a.call(n,i)&&n[i]&&e.push(i)}}}return e.join(" ")}e.exports?(s.default=s,e.exports=s):void 0!==(n=(function(){return s}).apply(t,[]))&&(e.exports=n)}()},7473:function(e,t,n){"use strict";n.d(t,{Qc:function(){return j},yV:function(){return O},_9:function(){return K},Ho:function(){return J},_v:function(){return ef}});var a=n(97458),s=n(36457),r=n(64618),o=n(55410),i=n(77946),l=n(34549),c=n(40434);async function d(e){let{id:t}=e,n=await (0,o.$v)("".concat(i.T5,"/profile/access-tokens/").concat(t));if(!(0,o.d8)(n))throw n.error;return n}let u=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,s.NL)();return(0,r.D)(e=>d(e),{async onSuccess(t,n,s){await a.invalidateQueries(c.C.list()),await (null==e?void 0:e(t,n,s))},async onError(e,n,a){void 0===t?l.Am.error("Failed to delete access token: ".concat(e.message)):t(e,n,a)},...n})};var m=n(47293),f=n(17471),h=n(52983),x=n(99658),p=n(19168),y=n(587),j=()=>{let{data:e,isLoading:t}=(0,m.h)(),{mutate:n}=u({onSuccess:()=>{l.Am.success("Successfully deleted access token"),r(!1)}}),[s,r]=(0,h.useState)(!1),[o,i]=(0,h.useState)(void 0),c=async e=>n({id:e});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{children:(0,a.jsx)(x.Z,{head:[(0,a.jsx)(x.Z.th,{children:"Token"},"header-token"),(0,a.jsx)(x.Z.th,{children:"Name"},"header-name"),(0,a.jsx)(x.Z.th,{children:"Created"},"header-created"),(0,a.jsx)(x.Z.th,{},"header-action")],body:e&&0==e.length?(0,a.jsx)(x.Z.tr,{children:(0,a.jsx)(x.Z.td,{colSpan:5,className:"p-3 py-12 text-center",children:(0,a.jsx)("p",{className:"text-foreground-light",children:t?"Checking for tokens":"You do not have any tokens created yet"})})}):(0,a.jsx)(a.Fragment,{children:null==e?void 0:e.map(e=>(0,a.jsxs)(x.Z.tr,{children:[(0,a.jsx)(x.Z.td,{children:(0,a.jsx)("span",{className:"font-mono",children:e.token_alias})}),(0,a.jsx)(x.Z.td,{children:e.name}),(0,a.jsx)(x.Z.td,{children:(0,a.jsx)("p",{children:new Date(e.created_at).toLocaleString()})}),(0,a.jsx)(x.Z.td,{children:(0,a.jsx)(p.z,{type:"default",title:"Delete token",className:"px-1",onClick:()=>{i(e),r(!0)},icon:(0,a.jsx)(f.Z,{})})})]},e.token_alias))}),"data-sentry-element":"Table","data-sentry-source-file":"AccessTokenList.tsx"})}),(0,a.jsx)(y.Z,{visible:s,variant:"destructive",title:"Confirm to delete",confirmLabel:"Delete",confirmLabelLoading:"Deleting",onCancel:()=>r(!1),onConfirm:()=>{o&&c(o.id)},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"AccessTokenList.tsx",children:(0,a.jsx)("p",{className:"py-4 text-sm text-foreground-light",children:'This action cannot be undone. Are you sure you want to delete "'.concat(null==o?void 0:o.name,'" token?')})})]})},g=n(13948),v=n(28977),b=n.n(v),N=n(17542),w=n(51478),k=n(24544),S=n(93553),C=n(61223),Z=n(47676),A=n(97705),M=n(98261),F=n(11100),T=n(28894),_=n(61250),D=n(44380);async function z(e,t){let{iso_timestamp_start:n,iso_timestamp_end:a}=e,{data:s,error:r}=await (0,_.U2)("/platform/profile/audit",{params:{query:{iso_timestamp_start:n,iso_timestamp_end:a}},signal:t});return r&&(0,_.S3)(r),s}let L=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{iso_timestamp_start:n,iso_timestamp_end:a}=e;return(0,T.a)(D.c.auditLogs({date_start:n,date_end:a}),t=>{let{signal:n}=t;return z(e,n)},{...t})};var P=n(37417),I=n(41888),O=()=>{var e,t,n,s;let r=b()().utc().set("millisecond",0),[o,i]=(0,h.useState)(!0),[l,c]=(0,h.useState)({from:r.subtract(1,"day").toISOString(),to:r.toISOString()}),[d,u]=(0,h.useState)(),[m,f]=(0,h.useState)({projects:[]}),{data:y}=(0,P.Sy)(),{data:j}=(0,F.tl)(),{data:v,error:T,isLoading:_,isSuccess:D,isError:z,isRefetching:O,refetch:$}=L({iso_timestamp_start:l.from,iso_timestamp_end:l.to});(0,h.useEffect)(()=>{let e=b()(l.from).diff(b()(l.to)),t=setInterval(()=>{let t=b()().utc().set("millisecond",0);c({from:t.add(e).toISOString(),to:t.toISOString()})},3e5);return()=>clearInterval(t)},[l.from,l.to]);let E=null!==(t=null==v?void 0:v.retention_period)&&void 0!==t?t:0,B=null!==(n=null==v?void 0:v.result)&&void 0!==n?n:[],V=null==B?void 0:null===(e=B.sort((e,t)=>o?Number(new Date(t.occurred_at))-Number(new Date(e.occurred_at)):Number(new Date(e.occurred_at))-Number(new Date(t.occurred_at))))||void 0===e?void 0:e.filter(e=>m.projects.length>0?m.projects.includes(e.target.metadata.project_ref||""):e);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-4 flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("p",{className:"text-xs prose",children:"Filter by"}),(0,a.jsx)(A.E,{name:"Projects",options:null!=y?y:[],labelKey:"name",valueKey:"ref",activeOptions:m.projects,onSaveFilters:e=>f({...m,projects:e}),"data-sentry-element":"FilterPopover","data-sentry-source-file":"AuditLogs.tsx"}),(0,a.jsx)(Z.M,{hideTime:!0,hideClear:!0,triggerButtonType:"dashed",triggerButtonTitle:"",from:l.from,to:l.to,minDate:b()().subtract(E,"days").toDate(),maxDate:b()().toDate(),onChange:e=>{if(null!==e.from&&null!==e.to){let t=b()().utc();c({from:b()(e.from).utc().hour(t.hour()).minute(t.minute()).second(t.second()).toISOString(),to:b()(e.to).utc().hour(t.hour()).minute(t.minute()).second(t.second()).toISOString()})}},renderFooter:()=>(0,a.jsxs)(I.b,{title:"",variant:"info",className:"mx-3 pl-2 pr-2 pt-1 pb-2",children:["You have a log retention period of"," ",(0,a.jsxs)("span",{className:"text-brand",children:[E," day",E>1?"s":""]}),". You may only view logs from"," ",b()().subtract(E,"days").format("DD MMM YYYY")," as the earliest date."]}),"data-sentry-element":"DatePicker","data-sentry-source-file":"AuditLogs.tsx"}),D&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"h-[20px] border-r border-strong !ml-4 !mr-2"}),(0,a.jsxs)("p",{className:"prose text-xs",children:["Viewing ",V.length," logs in total"]})]})]}),(0,a.jsx)(p.z,{type:"default",disabled:_||O,icon:(0,a.jsx)(N.Z,{className:O?"animate-spin":""}),onClick:()=>$(),"data-sentry-element":"Button","data-sentry-source-file":"AuditLogs.tsx",children:O?"Refreshing":"Refresh"})]}),_&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(M.Z,{}),(0,a.jsx)(M.Z,{className:"w-3/4"}),(0,a.jsx)(M.Z,{className:"w-1/2"})]}),z&&(0,a.jsx)(C.Z,{error:T,subject:"Failed to retrieve audit logs"}),D&&(0,a.jsx)(a.Fragment,{children:0===B.length?(0,a.jsx)("div",{className:"bg-surface-100 border rounded p-4 flex items-center justify-between",children:(0,a.jsx)("p",{className:"prose text-sm",children:"You do not have any audit logs available yet"})}):B.length>0&&0===V.length?(0,a.jsx)("div",{className:"bg-surface-100 border rounded p-4 flex items-center justify-between",children:(0,a.jsx)("p",{className:"prose text-sm",children:"No audit logs found based on the filters applied"})}):(0,a.jsx)(x.Z,{head:[(0,a.jsx)(x.Z.th,{className:"py-2",children:"Action"},"action"),(0,a.jsx)(x.Z.th,{className:"py-2",children:"Target"},"target"),(0,a.jsx)(x.Z.th,{className:"py-2",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("p",{children:"Date"}),(0,a.jsxs)(g.fC,{delayDuration:0,children:[(0,a.jsx)(g.xz,{asChild:!0,children:(0,a.jsx)(p.z,{type:"text",className:"px-1",icon:o?(0,a.jsx)(w.Z,{strokeWidth:1.5,size:14}):(0,a.jsx)(k.Z,{strokeWidth:1.5,size:14}),onClick:()=>i(!o)})}),(0,a.jsx)(g.h_,{children:(0,a.jsx)(g.h_,{children:(0,a.jsxs)(g.VY,{side:"right",children:[(0,a.jsx)(g.Eh,{className:"radix-tooltip-arrow"}),(0,a.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,a.jsx)("span",{className:"text-xs text-foreground",children:o?"Sort latest first":"Sort earliest first"})})]})})})]})]})},"date"),(0,a.jsx)(x.Z.th,{className:"py-2"},"actions")],body:null!==(s=null==V?void 0:V.map(e=>{var t,n,s,r,o,i,l;let c=null==y?void 0:y.find(t=>t.ref===e.target.metadata.project_ref),d=null==j?void 0:j.find(t=>t.slug===e.target.metadata.org_slug),m=(null===(t=e.action.metadata[0])||void 0===t?void 0:t.status)!==void 0;return(0,a.jsxs)(x.Z.tr,{onClick:()=>u(e),className:"cursor-pointer hover:!bg-alternative transition duration-100",children:[(0,a.jsx)(x.Z.td,{className:"max-w-[250px]",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[m&&(0,a.jsx)("p",{className:"bg-surface-200 rounded px-1 flex items-center justify-center text-xs font-mono border",children:e.action.metadata[0].status}),(0,a.jsx)("p",{className:"truncate",title:e.action.name,children:e.action.name})]})}),(0,a.jsxs)(x.Z.td,{children:[(0,a.jsxs)("p",{className:"text-foreground-light max-w-[230px] truncate",title:null!==(s=null!==(n=null==c?void 0:c.name)&&void 0!==n?n:null==d?void 0:d.name)&&void 0!==s?s:"-",children:[(null==c?void 0:c.name)?"Project: ":(null==d?void 0:d.name)?"Organization: ":null,null!==(o=null!==(r=null==c?void 0:c.name)&&void 0!==r?r:null==d?void 0:d.name)&&void 0!==o?o:"-"]}),(0,a.jsxs)("p",{className:"text-foreground-light text-xs mt-0.5 truncate",title:null!==(i=e.target.metadata.project_ref)&&void 0!==i?i:e.target.metadata.org_slug,children:[e.target.metadata.project_ref?"Ref: ":e.target.metadata.org_slug?"Slug: ":null,null!==(l=e.target.metadata.project_ref)&&void 0!==l?l:e.target.metadata.org_slug]})]}),(0,a.jsx)(x.Z.td,{children:b()(e.occurred_at).format("DD MMM YYYY, HH:mm:ss")}),(0,a.jsx)(x.Z.td,{align:"right",children:(0,a.jsx)(p.z,{type:"default",children:"View details"})})]},e.occurred_at)}))&&void 0!==s?s:[]})})]}),(0,a.jsx)(S.h,{selectedLog:d,onClose:()=>u(void 0),"data-sentry-element":"LogDetailsPanel","data-sentry-source-file":"AuditLogs.tsx"})]})},$=n(63204),E=n(2552),B=n(37669),V=n.n(B);async function Y(e){let{name:t,scope:n}=e,a=await (0,o.v_)("".concat(i.T5,"/profile/access-tokens"),{name:t,scope:n});if(!(0,o.d8)(a))throw a.error;return a}let R=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,s.NL)();return(0,r.D)(e=>Y(e),{async onSuccess(t,n,s){await a.invalidateQueries(c.C.list()),await (null==e?void 0:e(t,n,s))},async onError(e,n,a){void 0===t?l.Am.error("Failed to create access token: ".concat(e.message)):t(e,n,a)},...n})};var Q=n(77518),G=n(2054),q=n(93009),H=n(96789),X=n(7208),U=n(61911),K=e=>{let{onCreateToken:t}=e,[n,s]=(0,h.useState)(!1),[r,o]=(0,h.useState)(void 0),{mutate:i,isLoading:l}=R({onSuccess:e=>{t(e),s(!1)}}),c=async e=>{i({name:e.tokenName,scope:r})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"container max-w-7xl",children:(0,a.jsx)("div",{className:"flex justify-between",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(p.z,{className:"rounded-r-none px-3",onClick:()=>{o(void 0),s(!0)},"data-sentry-element":"Button","data-sentry-source-file":"NewAccessTokenButton.tsx",children:"Generate new token"}),(0,a.jsxs)(Q.h_,{"data-sentry-element":"DropdownMenu","data-sentry-source-file":"NewAccessTokenButton.tsx",children:[(0,a.jsx)(Q.$F,{asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"NewAccessTokenButton.tsx",children:(0,a.jsx)(p.z,{type:"primary",className:"rounded-l-none px-[4px] py-[5px]",icon:(0,a.jsx)($.Z,{}),"data-sentry-element":"Button","data-sentry-source-file":"NewAccessTokenButton.tsx"})}),(0,a.jsx)(Q.AW,{align:"end",side:"bottom","data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"NewAccessTokenButton.tsx",children:(0,a.jsx)(Q.Xi,{onClick:()=>{o("V0"),s(!0)},"data-sentry-element":"DropdownMenuItem","data-sentry-source-file":"NewAccessTokenButton.tsx",children:(0,a.jsx)("div",{className:"space-y-1",children:(0,a.jsx)("p",{className:"block text-foreground",children:"Generate token for experimental API"})})},"experimental-token")})]})]})})}),(0,a.jsx)(G.Z,{closable:!0,hideFooter:!0,size:"small",visible:n,onCancel:()=>s(!n),header:(0,a.jsx)("div",{className:"flex items-baseline gap-2",children:(0,a.jsx)("h5",{className:"text-sm text-foreground",children:"V0"===r?"Generate token for experimental API":"Generate New Token"})}),"data-sentry-element":"Modal","data-sentry-source-file":"NewAccessTokenButton.tsx",children:(0,a.jsx)(q.Z,{validateOnBlur:!0,initialValues:{tokenName:""},onSubmit:c,validate:e=>{let t={};return e.tokenName||(t.tokenName="Please enter a name for the token"),t},"data-sentry-element":"Form","data-sentry-source-file":"NewAccessTokenButton.tsx",children:()=>(0,a.jsxs)(a.Fragment,{children:["V0"===r&&(0,a.jsx)(G.Z.Content,{children:(0,a.jsx)(U.J,{type:"warning",title:"The experimental API provides additional endpoints which allows you to manage your organizations and projects.",description:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:"These include deleting organizations and projects which cannot be undone. As such, be very careful when using this API."}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(p.z,{asChild:!0,type:"default",icon:(0,a.jsx)(E.Z,{}),children:(0,a.jsx)(V(),{href:"https://api.supabase.com/api/v0",target:"_blank",rel:"noreferrer",children:"Experimental API documentation"})})})]})})}),(0,a.jsx)(G.Z.Content,{children:(0,a.jsx)(H.Z,{id:"tokenName",label:"Name",placeholder:"Provide a name for your token",className:"w-full"})}),(0,a.jsx)(X.cN,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 justify-end",children:[(0,a.jsx)(p.z,{type:"default",disabled:l,onClick:()=>s(!1),children:"Cancel"}),(0,a.jsx)(p.z,{htmlType:"submit",loading:l,disabled:l,children:"Generate token"})]})})]})})})]})},J=e=>{let{token:t}=e;return(0,a.jsx)(U.J,{type:"default",title:"Successfully generated a new token!",description:(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"w-full space-y-2",children:[(0,a.jsx)("p",{className:"text-sm",children:"Do copy this access token and store it in a secure place - you will not be able to see it again."}),(0,a.jsx)(H.Z,{copy:!0,readOnly:!0,size:"small",className:"max-w-xl input-mono",value:t.token,onChange:()=>{}})]})}),"data-sentry-element":"Admonition","data-sentry-component":"NewTokenBanner","data-sentry-source-file":"NewTokenBanner.tsx"})},W=n(71794),ee=n(41083),et=n(71904),en=n(52065),ea=n(72808),es=n(27106);let er=async e=>{let{error:t,data:n}=await es.I8.mfa.enroll(e);if(t)throw t;return n},eo=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.D)(e=>er(e),{async onSuccess(t,n,a){await (null==e?void 0:e(t,n,a))},async onError(e,n,a){void 0===t?l.Am.error("Failed to enroll factor: ".concat(e.message)):t(e,n,a)},...n})},ei=async e=>{let{error:t,data:n}=await es.I8.mfa.unenroll(e);if(t)throw t;return n},el=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,s.NL)();return(0,r.D)(e=>ei(e),{async onSuccess(t,n,s){await Promise.all([a.invalidateQueries(D.c.mfaFactors()),a.invalidateQueries(D.c.aaLevel())]),await (null==e?void 0:e(t,n,s))},async onError(e,n,a){void 0===t?l.Am.error("Failed to delete factor: ".concat(e.message)):t(e,n,a)},...n})},ec=e=>{let{visible:t,name:n,enroll:s,setName:r,isEnrolling:o,onClose:i}=e;return(0,a.jsx)(y.Z,{size:"medium",visible:t,title:"Add a new authenticator app as a factor",confirmLabel:"Generate QR",confirmLabelLoading:"Generating QR",disabled:0===n.length,loading:o,onCancel:i,onConfirm:()=>{s({factorType:"totp",friendlyName:n})},"data-sentry-element":"ConfirmationModal","data-sentry-component":"FirstStep","data-sentry-source-file":"AddNewFactorModal.tsx",children:(0,a.jsx)(H.Z,{label:"Provide a name to identify this app",descriptionText:"A string will be randomly generated if a name is not provided",value:n,onChange:e=>r(e.target.value),"data-sentry-element":"Input","data-sentry-source-file":"AddNewFactorModal.tsx"})})},ed=e=>{let{visible:t,factorName:n,factor:s,isLoading:r,onSuccess:o,onClose:i}=e,[c,d]=(0,h.useState)(""),{mutate:u}=el({onSuccess:()=>i()}),{mutate:m,isLoading:f}=(0,ea.O)({onError:e=>{l.Am.error("Failed to add a second factor authentication:  ".concat(null==e?void 0:e.message))},onSuccess:()=>{l.Am.success("Successfully added a second factor authentication"),o()}}),[x,p]=(0,h.useState)(null);return(0,h.useEffect)(()=>{s&&(null==x?void 0:x.id)!==s.id&&p(s)},[s]),(0,a.jsx)(y.Z,{size:"medium",visible:t,title:"Verify new factor ".concat(n),confirmLabel:"Confirm",confirmLabelLoading:"Confirming",loading:f,onCancel:()=>{x&&u({factorId:x.id})},onConfirm:()=>x&&m({factorId:x.id,code:c}),"data-sentry-element":"ConfirmationModal","data-sentry-component":"SecondStep","data-sentry-source-file":"AddNewFactorModal.tsx",children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"py-4 pb-0 text-sm",children:(0,a.jsx)("span",{children:"Use an authenticator app to scan the following QR code, and provide the code from the app to complete the enrolment."})}),r&&(0,a.jsx)("div",{className:"pb-4 px-4",children:(0,a.jsx)(M.A,{})}),x&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex justify-center py-6",children:(0,a.jsx)("div",{className:"h-48 w-48 bg-white rounded",children:(0,a.jsx)("img",{width:190,height:190,src:x.totp.qr_code,alt:x.totp.uri})})}),(0,a.jsx)("div",{children:(0,a.jsx)(en.Z,{title:"Unable to scan?",description:(0,a.jsx)(H.Z,{copy:!0,disabled:!0,id:"ref",size:"small",label:"You can also enter this secret key into your authenticator app",value:x.totp.secret})})}),(0,a.jsx)("div",{className:"pt-2 pb-4",children:(0,a.jsx)(H.Z,{label:"Authentication code",value:c,placeholder:"XXXXXX",onChange:e=>d(e.target.value)})})]})]})})};var eu=e=>{let{visible:t,onClose:n}=e,[s,r]=(0,h.useState)("App ".concat(Math.floor(1e3*Math.random()))),{data:o,mutate:i,isLoading:l,reset:c}=eo();return(0,h.useEffect)(()=>{t||(r("App ".concat(Math.floor(1e3*Math.random()))),c())},[c,t]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ec,{visible:t&&!o,name:s,setName:r,enroll:i,isEnrolling:l,onClose:n,"data-sentry-element":"FirstStep","data-sentry-source-file":"AddNewFactorModal.tsx"}),(0,a.jsx)(ed,{visible:t&&!!o,factorName:s,factor:o,isLoading:l,onSuccess:()=>n(),onClose:n,"data-sentry-element":"SecondStep","data-sentry-source-file":"AddNewFactorModal.tsx"})]})},em=e=>{let{visible:t,factorId:n,lastFactorToBeDeleted:s,onClose:r}=e,{mutate:o,isLoading:i}=el({onSuccess:()=>{l.Am.success("Successfully deleted factor"),r()}});return(0,a.jsxs)(y.Z,{size:"medium",visible:t,variant:"destructive",title:"Confirm to delete factor",confirmLabel:"Delete",confirmLabelLoading:"Deleting",loading:i,onCancel:r,onConfirm:()=>n&&o({factorId:n}),alert:{title:s?"Multi-factor authentication will be disabled":"This action cannot be undone",description:s?"There are no other factors that are set up once you delete this factor, as such your account will no longer be guarded by multi-factor authentication":"You will no longer be able to use this authenticator app for multi-factor authentication when signing in to the dashboard"},"data-sentry-element":"ConfirmationModal","data-sentry-component":"DeleteFactorModal","data-sentry-source-file":"DeleteFactorModal.tsx",children:[(0,a.jsx)("p",{className:"text-sm",children:"Before deleting this factor, consider:"}),(0,a.jsx)("ul",{className:"text-sm text-foreground-light py-1 list-disc mx-4 space-y-1",children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("li",{children:"Adding another authenticator app as a factor prior to deleting"}),(0,a.jsx)("li",{children:"Ensure that your account does not need multi-factor authentication"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("li",{children:"Your backup authenticator app is still available to use"}),(0,a.jsx)("li",{children:"Adding another authenticator app thereafter as a backup"})]})})]})},ef=()=>{let[e,t]=(0,h.useState)(!1),[n,s]=(0,h.useState)(null),{data:r,isLoading:o,isError:l,isSuccess:c,error:d}=(0,ee.U)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("section",{className:"space-y-3",children:[(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"Generate one-time passwords via authenticator apps like 1Password, Authy, etc. as a second factor to verify your identity during sign-in."}),(0,a.jsxs)("div",{children:[o&&(0,a.jsx)(M.A,{}),l&&(0,a.jsx)(C.Z,{error:d,subject:"Failed to retrieve account security information"}),c&&(0,a.jsxs)(a.Fragment,{children:[1===r.totp.length&&(0,a.jsxs)(et.bZ,{variant:"default",className:"mb-2",children:[(0,a.jsx)(W.Z,{className:"h-4 w-4"}),(0,a.jsx)(et.Cd,{children:"We recommend configuring two authenticator apps across different devices"}),(0,a.jsx)(et.X,{className:"flex flex-col gap-3",children:"The two authenticator apps will serve as a backup for each other."})]}),(0,a.jsx)("div",{children:r.totp.map(e=>{var t;return(0,a.jsxs)("div",{className:"flex flex-row justify-between py-2",children:[(0,a.jsxs)("p",{className:"text-sm text-foreground flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-foreground-light",children:"Name:"})," ",(0,a.jsx)("span",{children:null!==(t=e.friendly_name)&&void 0!==t?t:"No name provided"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("p",{className:"text-sm text-foreground-light",children:["Added on ",b()(e.updated_at).format(i.Cu)]}),(0,a.jsx)(p.z,{size:"tiny",type:"default",onClick:()=>s(e.id),children:"Remove"})]})]},e.id)})}),r.totp.length<2?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"pt-2",children:(0,a.jsx)(p.z,{onClick:()=>t(!0),children:"Add new app"})})}):null]})]})]}),(0,a.jsx)(eu,{visible:e,onClose:()=>t(!1),"data-sentry-element":"AddNewFactorModal","data-sentry-source-file":"index.tsx"}),(0,a.jsx)(em,{visible:null!==n,factorId:n,lastFactorToBeDeleted:(null==r?void 0:r.totp.length)===1,onClose:()=>s(null),"data-sentry-element":"DeleteFactorModal","data-sentry-source-file":"index.tsx"})]})}},47293:function(e,t,n){"use strict";n.d(t,{h:function(){return l}});var a=n(28894),s=n(55410),r=n(77946),o=n(40434);async function i(e){let t=await (0,s.U2)("".concat(r.T5,"/profile/access-tokens"),{signal:e});if(!(0,s.d8)(t))throw t.error;return t}let l=function(){let{enabled:e=!0,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.a)(o.C.list(),e=>{let{signal:t}=e;return i(t)},t)}},40434:function(e,t,n){"use strict";n.d(t,{C:function(){return a}});let a={list:()=>["access-tokens"]}},72808:function(e,t,n){"use strict";n.d(t,{O:function(){return u}});var a=n(64621),s=n(36457),r=n(64618),o=n(34549),i=n(27106),l=n(44380);let c=["Invalid TOTP code entered"],d=async e=>{let{error:t,data:n}=await i.I8.mfa.challengeAndVerify(e);if(t)throw t;return n},u=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,s.NL)();return(0,r.D)(e=>{let{refreshFactors:t,...n}=e;return d(n)},{async onSuccess(t,n,a){var s;let r=null===(s=n.refreshFactors)||void 0===s||s;await Promise.all([...r?[i.invalidateQueries(l.c.mfaFactors())]:[],i.invalidateQueries(l.c.aaLevel())]),await (null==e?void 0:e(t,n,a))},async onError(e,n,s){void 0===t?o.Am.error("Failed to sign in: ".concat(e.message)):t(e,n,s),c.some(t=>e.message.includes(t))||a.uT("[CRITICAL] Failed to sign in via MFA: "+e.message)},...n})}},41083:function(e,t,n){"use strict";n.d(t,{U:function(){return i}});var a=n(28894),s=n(27106),r=n(44380);async function o(){let{error:e,data:t}=await s.I8.mfa.listFactors();if(e)throw e;return t}let i=function(){let{enabled:e=!0,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.a)(r.c.mfaFactors(),()=>o(),{staleTime:18e5,...t})}},51478:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(67634).Z)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]])},44216:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(67634).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},24544:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(67634).Z)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]])},60630:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(67634).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},92494:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(67634).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},5498:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(67634).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},92197:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(67634).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},62836:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(67634).Z)("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]])},71598:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(67634).Z)("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]])},63271:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(67634).Z)("OctagonAlert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]])},17542:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(67634).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},17471:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(67634).Z)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])},73488:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(67634).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},99658:function(e,t,n){"use strict";var a=n(97458);function s(e){let{body:t,head:n,className:s,containerClassName:r,borderless:o,headTrClasses:i,bodyClassName:l,style:c}=e,d=["table-container"];r&&d.push(r),o&&d.push("table-container--borderless");let u=["table"];return s&&u.push(s),(0,a.jsx)("div",{className:d.join(" "),"data-sentry-component":"Table","data-sentry-source-file":"Table.tsx",children:(0,a.jsxs)("table",{className:u.join(" "),style:c,children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{className:i,children:n})}),(0,a.jsx)("tbody",{className:l,children:t})]})})}s.th=e=>{let{children:t,className:n,style:s}=e,r=["p-3 px-4 text-left"];return n&&r.push(n),(0,a.jsx)("th",{className:r.join(" "),style:s,"data-sentry-component":"Th","data-sentry-source-file":"Table.tsx",children:t})},s.td=e=>{let{children:t,colSpan:n,className:s,style:r,...o}=e;return(0,a.jsx)("td",{className:s,colSpan:n,style:r,...o,"data-sentry-component":"Td","data-sentry-source-file":"Table.tsx",children:t})},s.tr=e=>{let{children:t,className:n,onClick:s,style:r,hoverable:o}=e,i=[n];return(s||o)&&i.push("tr--link"),(0,a.jsx)("tr",{className:i.join(" "),onClick:s,style:r,"data-sentry-component":"Tr","data-sentry-source-file":"Table.tsx",children:t})},t.Z=s},8504:function(e,t,n){"use strict";n.d(t,{p:function(){return o}});var a=n(97458),s=n(5546),r=n(26655);let o=e=>{let{title:t,description:n,docsUrl:o,actions:i,className:l}=e;return(0,a.jsxs)("div",{className:(0,s.cn)("mb-6 flex items-center justify-between gap-x-4 ".concat(l)),"data-sentry-component":"FormHeader","data-sentry-source-file":"FormHeader.tsx",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h3",{className:"text-foreground text-xl prose",children:t}),n&&(0,a.jsx)("div",{className:"prose text-sm max-w-full",children:n})]}),(0,a.jsxs)("div",{className:"flex items-center gap-x-2",children:[void 0!==o&&(0,a.jsx)(r.G,{href:o}),i]})]})}},587:function(e,t,n){"use strict";var a=n(97458),s=n(52983),r=n(7208),o=n(5546),i=n(19168),l=n(61911);let c=(0,s.forwardRef)((e,t)=>{let{title:n,size:c="small",visible:d,onCancel:u,onConfirm:m,loading:f=!1,cancelLabel:h="Cancel",confirmLabel:x="Submit",confirmLabelLoading:p,alert:y,children:j,variant:g="default",disabled:v,...b}=e;(0,s.useEffect)(()=>{d&&w(!1)},[d]);let[N,w]=(0,s.useState)(!1);return(0,a.jsx)(r.Vq,{open:d,...b,onOpenChange:()=>{d&&u()},children:(0,a.jsxs)(r.cZ,{ref:t,className:"p-0 gap-0 pb-5 !block",size:c,children:[(0,a.jsx)(r.fK,{className:(0,o.cn)("border-b"),padding:"small",children:(0,a.jsx)(r.$N,{className:"",children:n})}),y&&(0,a.jsx)(l.J,{type:g,label:y.title,description:y.description,className:"border-r-0 border-l-0 rounded-none -mt-px [&_svg]:ml-0.5 mb-0",...null==y?void 0:y.base}),j&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.VO,{padding:"small",children:j}),(0,a.jsx)(r.P3,{})]}),(0,a.jsxs)("div",{className:"flex gap-2 px-5 pt-5",children:[(0,a.jsx)(i.z,{size:"medium",block:!0,type:"default",disabled:N,onClick:()=>u(),children:h}),(0,a.jsx)(i.z,{block:!0,size:"medium",type:"destructive"===g?"danger":"warning"===g?"warning":"primary",htmlType:"submit",loading:N,disabled:N||v,onClick:e=>{e.preventDefault(),e.stopPropagation(),w(!0),m()},className:"truncate",children:x})]})]})})});c.displayName="ConfirmationModal",t.Z=c},86977:function(e,t,n){"use strict";var a=n(97458),s=n(79904);n(52983);var r=n(19168),o=n(82445),i=n(82188);let l=e=>{let{id:t,disabled:n,className:l,children:c,header:d,visible:u,open:m,size:f="medium",loading:h,align:x="right",hideFooter:p=!1,customFooter:y,onConfirm:j,onCancel:g,confirmText:v="Confirm",cancelText:b="Cancel",triggerElement:N,defaultOpen:w,tooltip:k,...S}=e,C=(0,i.Z)("sidepanel"),Z=y||(0,a.jsxs)("div",{className:C.footer,children:[(0,a.jsx)("div",{children:(0,a.jsx)(r.z,{disabled:h,type:"default",onClick:()=>g?g():null,children:b})}),void 0!==j&&(0,a.jsxs)(o.u,{children:[(0,a.jsx)(o.aJ,{asChild:!0,children:(0,a.jsx)("span",{className:"inline-block",children:(0,a.jsx)(r.z,{htmlType:"submit",disabled:n||h,loading:h,onClick:()=>j?j():null,children:v})})}),void 0!==k&&(0,a.jsx)(o._v,{side:"bottom",children:k})]})]});return m=m||u,(0,a.jsxs)(s.fC,{open:m,onOpenChange:function(e){void 0!==u&&!e&&g&&g()},defaultOpen:w,"data-sentry-element":"unknown","data-sentry-component":"SidePanel","data-sentry-source-file":"SidePanel.tsx",children:[N&&(0,a.jsx)(s.xz,{asChild:!0,className:C.trigger,children:N}),(0,a.jsxs)(s.h_,{"data-sentry-element":"unknown","data-sentry-source-file":"SidePanel.tsx",children:[(0,a.jsx)(s.aV,{className:C.overlay,"data-sentry-element":"unknown","data-sentry-source-file":"SidePanel.tsx"}),(0,a.jsxs)(s.VY,{className:[C.base,C.size[f],C.align[x],l&&l].join(" "),onOpenAutoFocus:S.onOpenAutoFocus,onCloseAutoFocus:S.onCloseAutoFocus,onEscapeKeyDown:S.onEscapeKeyDown,onPointerDownOutside:S.onPointerDownOutside,onInteractOutside:e=>{var t;(null===(t=e.target)||void 0===t?void 0:t.closest("#toast"))&&e.preventDefault(),S.onInteractOutside&&S.onInteractOutside(e)},"data-sentry-element":"unknown","data-sentry-source-file":"SidePanel.tsx",children:[d&&(0,a.jsx)("header",{className:C.header,children:d}),(0,a.jsx)("div",{className:C.contents,children:c}),!p&&Z]})]})]})};l.Content=function(e){let{children:t,className:n}=e,s=(0,i.Z)("sidepanel");return(0,a.jsx)("div",{className:[s.content,n].join(" ").trim(),"data-sentry-component":"Content","data-sentry-source-file":"SidePanel.tsx",children:t})},l.Separator=function(){let e=(0,i.Z)("sidepanel");return(0,a.jsx)("div",{className:e.separator,"data-sentry-component":"Separator","data-sentry-source-file":"SidePanel.tsx"})},t.ZP=l},4507:function(e,t){"use strict";var n="function"==typeof Symbol&&Symbol.for,a=n?Symbol.for("react.element"):60103,s=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,i=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,d=n?Symbol.for("react.async_mode"):60111,u=n?Symbol.for("react.concurrent_mode"):60111,m=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.suspense_list"):60120,x=n?Symbol.for("react.memo"):60115,p=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,j=n?Symbol.for("react.fundamental"):60117,g=n?Symbol.for("react.responder"):60118,v=n?Symbol.for("react.scope"):60119;function b(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case a:switch(e=e.type){case d:case u:case r:case i:case o:case f:return e;default:switch(e=e&&e.$$typeof){case c:case m:case p:case x:case l:return e;default:return t}}case s:return t}}}function N(e){return b(e)===u}t.AsyncMode=d,t.ConcurrentMode=u,t.ContextConsumer=c,t.ContextProvider=l,t.Element=a,t.ForwardRef=m,t.Fragment=r,t.Lazy=p,t.Memo=x,t.Portal=s,t.Profiler=i,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return N(e)||b(e)===d},t.isConcurrentMode=N,t.isContextConsumer=function(e){return b(e)===c},t.isContextProvider=function(e){return b(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===a},t.isForwardRef=function(e){return b(e)===m},t.isFragment=function(e){return b(e)===r},t.isLazy=function(e){return b(e)===p},t.isMemo=function(e){return b(e)===x},t.isPortal=function(e){return b(e)===s},t.isProfiler=function(e){return b(e)===i},t.isStrictMode=function(e){return b(e)===o},t.isSuspense=function(e){return b(e)===f},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===r||e===u||e===i||e===o||e===f||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===p||e.$$typeof===x||e.$$typeof===l||e.$$typeof===c||e.$$typeof===m||e.$$typeof===j||e.$$typeof===g||e.$$typeof===v||e.$$typeof===y)},t.typeOf=b},99415:function(e,t,n){"use strict";e.exports=n(4507)}}]);