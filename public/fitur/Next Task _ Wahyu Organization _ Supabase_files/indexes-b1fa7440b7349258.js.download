!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="7fcce362-4272-4d68-9fd6-f42c86b525b1",e._sentryDebugIdIdentifier="sentry-dbid-7fcce362-4272-4d68-9fd6-f42c86b525b1")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6796],{8660:function(e){e.exports=function(e,n,t,a){for(var s=-1,r=null==e?0:e.length;++s<r;){var i=e[s];n(a,i,t(i),e)}return a}},3792:function(e,n,t){var a=t(61701);e.exports=function(e,n,t,s){return a(e,function(e,a,r){n(s,e,t(e),r)}),s}},48318:function(e,n,t){var a=t(84546),s=t(45436),r=t(99105),i=t(29233),l=t(31525),c=t(77026);e.exports=function(e,n,t,o){var d=-1,u=s,m=!0,x=e.length,h=[],f=n.length;if(!x)return h;t&&(n=i(n,l(t))),o?(u=r,m=!1):n.length>=200&&(u=c,m=!1,n=new a(n));e:for(;++d<x;){var p=e[d],g=null==t?p:t(p);if(p=o||0!==p?p:0,m&&g==g){for(var y=f;y--;)if(n[y]===g)continue e;h.push(p)}else u(n,g,o)||h.push(p)}return h}},17325:function(e,n,t){var a=t(8660),s=t(3792),r=t(55833),i=t(55589);e.exports=function(e,n){return function(t,l){var c=i(t)?a:s,o=n?n():{};return c(t,e,r(l,2),o)}}},40916:function(e,n,t){var a=t(54466),s=t(55589);e.exports=function(e,n,t,r){return null==e?[]:(s(n)||(n=null==n?[]:[n]),s(t=r?void 0:t)||(t=null==t?[]:[t]),a(e,n,t))}},50663:function(e,n,t){var a=t(17325)(function(e,n,t){e[t?0:1].push(n)},function(){return[[],[]]});e.exports=a},92238:function(e,n,t){var a=t(48318),s=t(29735),r=t(18268),i=s(function(e,n){return r(e)?a(e,n):[]});e.exports=i},85740:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/database/indexes",function(){return t(46555)}])},60816:function(e,n,t){"use strict";t.d(n,{LW:function(){return u},bn:function(){return f}});var a=t(36457),s=t(64618),r=t(34549),i=t(15538),l=t.n(i),c=t(29020),o=t(81899),d=t(30344);let u="pgmq_public",m=l()("\ncreate schema if not exists ".concat(u,";\ngrant usage on schema ").concat(u," to postgres, anon, authenticated, service_role;\n\ncreate or replace function ").concat(u,".pop(\n    queue_name text\n)\n  returns setof pgmq.message_record\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return query\n    select *\n    from pgmq.pop(\n        queue_name := queue_name\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".pop(queue_name text) is 'Retrieves and locks the next message from the specified queue.';\n\n\ncreate or replace function ").concat(u,".send(\n    queue_name text,\n    message jsonb,\n    sleep_seconds integer default 0  -- renamed from 'delay'\n)\n  returns setof bigint\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return query\n    select *\n    from pgmq.send(\n        queue_name := queue_name,\n        msg := message,\n        delay := sleep_seconds\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".send(queue_name text, message jsonb, sleep_seconds integer) is 'Sends a message to the specified queue, optionally delaying its availability by a number of seconds.';\n\n\ncreate or replace function ").concat(u,".send_batch(\n    queue_name text,\n    messages jsonb[],\n    sleep_seconds integer default 0  -- renamed from 'delay'\n)\n  returns setof bigint\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return query\n    select *\n    from pgmq.send_batch(\n        queue_name := queue_name,\n        msgs := messages,\n        delay := sleep_seconds\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".send_batch(queue_name text, messages jsonb[], sleep_seconds integer) is 'Sends a batch of messages to the specified queue, optionally delaying their availability by a number of seconds.';\n\n\ncreate or replace function ").concat(u,".archive(\n    queue_name text,\n    message_id bigint\n)\n  returns boolean\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return\n    pgmq.archive(\n        queue_name := queue_name,\n        msg_id := message_id\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".archive(queue_name text, message_id bigint) is 'Archives a message by moving it from the queue to a permanent archive.';\n\n\ncreate or replace function ").concat(u,".archive(\n    queue_name text,\n    message_id bigint\n)\n  returns boolean\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return\n    pgmq.archive(\n        queue_name := queue_name,\n        msg_id := message_id\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".archive(queue_name text, message_id bigint) is 'Archives a message by moving it from the queue to a permanent archive.';\n\n\ncreate or replace function ").concat(u,".delete(\n    queue_name text,\n    message_id bigint\n)\n  returns boolean\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return\n    pgmq.delete(\n        queue_name := queue_name,\n        msg_id := message_id\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".delete(queue_name text, message_id bigint) is 'Permanently deletes a message from the specified queue.';\n\ncreate or replace function ").concat(u,".read(\n    queue_name text,\n    sleep_seconds integer,\n    n integer\n)\n  returns setof pgmq.message_record\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return query\n    select *\n    from pgmq.read(\n        queue_name := queue_name,\n        vt := sleep_seconds,\n        qty := n\n    );\nend;\n$$;\n\ncomment on function ").concat(u,'.read(queue_name text, sleep_seconds integer, n integer) is \'Reads up to "n" messages from the specified queue with an optional "sleep_seconds" (visibility timeout).\';\n\n-- Grant execute permissions on wrapper functions to roles\ngrant execute on function ').concat(u,".pop(text) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.pop(text) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".send(text, jsonb, integer) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.send(text, jsonb, integer) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".send_batch(text, jsonb[], integer) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.send_batch(text, jsonb[], integer) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".archive(text, bigint) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.archive(text, bigint) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".delete(text, bigint) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.delete(text, bigint) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".read(text, integer, integer) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.read(text, integer, integer) to postgres, service_role, anon, authenticated;\n\n-- For the service role, we want full access\n-- Grant permissions on existing tables\ngrant all privileges on all tables in schema pgmq to postgres, service_role;\n\n-- Ensure service_role has permissions on future tables\nalter default privileges in schema pgmq grant all privileges on tables to postgres, service_role;\n\ngrant usage on schema pgmq to postgres, anon, authenticated, service_role;\n")),x=l()("\n  drop function if exists \n    ".concat(u,".pop(queue_name text),\n    ").concat(u,".send(queue_name text, message jsonb, sleep_seconds integer),\n    ").concat(u,".send_batch(queue_name text, message jsonb[], sleep_seconds integer),\n    ").concat(u,".archive(queue_name text, message_id bigint),\n    ").concat(u,".delete(queue_name text, message_id bigint),\n    ").concat(u,".read(queue_name text, sleep integer, n integer)\n  ;\n\n  -- Revoke execute permissions on inner pgmq functions to roles (inverse of enabling)\n  do $$\n  begin\n      if exists (select 1 from pg_namespace where nspname = 'pgmq') then\n          -- Revoke privileges on the schema itself\n          revoke all on schema pgmq from anon, authenticated, service_role;\n          \n          -- Revoke default privileges for future objects\n          alter default privileges in schema pgmq revoke all on tables from anon, authenticated, service_role;\n          alter default privileges in schema pgmq revoke all on sequences from anon, authenticated, service_role;\n          alter default privileges in schema pgmq revoke all on functions from anon, authenticated, service_role;\n      end if;\n  end $$;\n\n  drop schema if exists ").concat(u,";\n"));async function h(e){let{projectRef:n,connectionString:t,enable:a}=e,{result:s}=await (0,c.R)({projectRef:n,connectionString:t,sql:a?m:x,queryKey:["toggle-queues-exposure"]});return s}let f=function(){let{onSuccess:e,onError:n,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,a.NL)();return(0,s.D)(e=>h(e),{async onSuccess(n,t,a){let{projectRef:s}=t;await i.invalidateQueries(o.a.exposePostgrestStatus(s)),i.invalidateQueries(d.A.schemas(s)),await (null==e?void 0:e(n,t,a))},async onError(e,t,a){void 0===n?r.Am.error("Failed to toggle queue exposure via PostgREST: ".concat(e.message)):n(e,t,a)},...t})}},81899:function(e,n,t){"use strict";t.d(n,{a:function(){return a}});let a={create:()=>["queues","create"],delete:e=>["queues",e,"delete"],purge:e=>["queues",e,"purge"],getMessagesInfinite:(e,n,t)=>["projects",e,"queue-messages",n,t].filter(Boolean),list:e=>["projects",e,"queues"],metrics:(e,n)=>["projects",e,"queue-metrics",n],exposePostgrestStatus:e=>["projects",e,"queue-expose-status"]}},85817:function(e,n,t){"use strict";t.d(n,{Kz:function(){return c}});var a=t(28894),s=t(29020),r=t(30344);let i=e=>{let{table:n,schema:t}=e,a=[];n&&a.push("tablename = '".concat(n,"'")),t&&a.push("schemaname = '".concat(t,"'"));let s=a.length>0?"WHERE ".concat(a.join(" AND ")):"";return"\n  \n  SELECT\n    tbl.schemaname,\n    tbl.tablename,\n    tbl.quoted_name,\n    tbl.is_table,\n    json_agg(a) as columns\n  FROM\n    (\n      SELECT\n        n.nspname as schemaname,\n        c.relname as tablename,\n        (quote_ident(n.nspname) || '.' || quote_ident(c.relname)) as quoted_name,\n        true as is_table\n      FROM\n        pg_catalog.pg_class c\n        JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace\n      WHERE\n        c.relkind = 'r'\n        AND n.nspname not in ('information_schema', 'pg_catalog', 'pg_toast')\n        AND n.nspname not like 'pg_temp_%'\n        AND n.nspname not like 'pg_toast_temp_%'\n        AND has_schema_privilege(n.oid, 'USAGE') = true\n        AND has_table_privilege(quote_ident(n.nspname) || '.' || quote_ident(c.relname), 'SELECT, INSERT, UPDATE, DELETE, TRUNCATE, REFERENCES, TRIGGER') = true\n      union all\n      SELECT\n        n.nspname as schemaname,\n        c.relname as tablename,\n        (quote_ident(n.nspname) || '.' || quote_ident(c.relname)) as quoted_name,\n        false as is_table\n      FROM\n        pg_catalog.pg_class c\n        JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace\n      WHERE\n        c.relkind in ('v', 'm')\n        AND n.nspname not in ('information_schema', 'pg_catalog', 'pg_toast')\n        AND n.nspname not like 'pg_temp_%'\n        AND n.nspname not like 'pg_toast_temp_%'\n        AND has_schema_privilege(n.oid, 'USAGE') = true\n        AND has_table_privilege(quote_ident(n.nspname) || '.' || quote_ident(c.relname), 'SELECT, INSERT, UPDATE, DELETE, TRUNCATE, REFERENCES, TRIGGER') = true\n    ) as tbl\n    LEFT JOIN (\n      SELECT\n        attrelid,\n        attname,\n        format_type(atttypid, atttypmod) as data_type,\n        attnum,\n        attisdropped\n      FROM\n        pg_attribute\n    ) as a ON (\n      a.attrelid = tbl.quoted_name::regclass\n      AND a.attnum > 0\n      AND NOT a.attisdropped\n      AND has_column_privilege(tbl.quoted_name, a.attname, 'SELECT, INSERT, UPDATE, REFERENCES')\n    )\n  ".concat(s,"\n  GROUP BY schemaname, tablename, quoted_name, is_table;\n").trim()};async function l(e,n){let{projectRef:t,connectionString:a,table:r,schema:l}=e,c=i({table:r,schema:l}),{result:o}=await (0,s.R)({projectRef:t,connectionString:a,sql:c,queryKey:["table-columns",l,r]},n);return o}let c=function(e){let{projectRef:n,connectionString:t,schema:s,table:i}=e,{enabled:c=!0,...o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.a)(r.A.tableColumns(n,s,i),e=>{let{signal:a}=e;return l({projectRef:n,connectionString:t,schema:s,table:i},a)},{enabled:c&&void 0!==n,...o})}},10012:function(e,n,t){"use strict";t.d(n,{B:function(){return c}});var a=t(73860),s=t(52983),r=t(45925),i=t(77946);let l=e=>(0,a.v1)("schema",a.Oi.withDefault(e)),c=()=>{let{ref:e}=(0,r.UO)(),n=e&&e.length>0&&window.localStorage.getItem(i.dA.LAST_SELECTED_SCHEMA(e))||"public",[t,a]=l((0,s.useMemo)(()=>n,[e]));return(0,s.useEffect)(()=>{e&&e.length>0&&window.localStorage.setItem(i.dA.LAST_SELECTED_SCHEMA(e),t)},[t,e]),{selectedSchema:t,setSelectedSchema:a}}},43428:function(e,n,t){"use strict";t.d(n,{T:function(){return s},s:function(){return a}});let a=["auth","cron","extensions","information_schema","net","pgsodium","pgsodium_masks","pgbouncer","pgtle","realtime","storage","supabase_functions","supabase_migrations","vault","graphql","graphql_public",t(60816).LW],s=a.filter(e=>"extensions"!==e)},68056:function(e,n,t){"use strict";t.d(n,{Z:function(){return a}});let a=(0,t(67634).Z)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]])},63635:function(e,n,t){"use strict";t.d(n,{b:function(){return d}});var a=t(97458),s=t(52983),r=t(2054),i=t(19168),l=t(71904),c=t(43428),o=t(71794);let d=e=>{let{visible:n,onClose:t}=e;return(0,a.jsx)(r.Z,{size:"medium",visible:n,header:"Schemas managed by Supabase",customFooter:(0,a.jsx)("div",{className:"flex items-center justify-end space-x-2",children:(0,a.jsx)(i.z,{type:"default",onClick:()=>t(),children:"Understood"})}),onCancel:()=>t(),"data-sentry-element":"Modal","data-sentry-component":"ProtectedSchemaModal","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:(0,a.jsxs)(r.Z.Content,{className:"space-y-2","data-sentry-element":"unknown","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:[(0,a.jsx)("p",{className:"text-sm",children:"The following schemas are managed by Supabase and are currently protected from write access through the dashboard."}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:c.s.map(e=>(0,a.jsx)("code",{className:"text-xs",children:e},e))}),(0,a.jsx)("p",{className:"text-sm !mt-4",children:"These schemas are critical to the functionality of your Supabase project and hence we highly recommend not altering them."}),(0,a.jsx)("p",{className:"text-sm",children:"You can, however, still interact with those schemas through the SQL Editor although we advise you only do so if you know what you are doing."})]})})};n.Z=e=>{let{schema:n,entity:t}=e,[r,c]=(0,s.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l.bZ,{"data-sentry-element":"Alert_Shadcn_","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:[(0,a.jsx)(o.Z,{strokeWidth:2,"data-sentry-element":"AlertCircle","data-sentry-source-file":"ProtectedSchemaWarning.tsx"}),(0,a.jsxs)(l.Cd,{"data-sentry-element":"AlertTitle_Shadcn_","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:["Currently viewing ",t," from a protected schema"]}),(0,a.jsxs)(l.X,{"data-sentry-element":"AlertDescription_Shadcn_","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:[(0,a.jsxs)("p",{className:"mb-2",children:["The ",(0,a.jsx)("code",{className:"text-xs",children:n})," schema is managed by Supabase and is read-only through the dashboard."]}),(0,a.jsx)(i.z,{type:"default",size:"tiny",onClick:()=>c(!0),"data-sentry-element":"Button","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:"Learn more"})]})]}),(0,a.jsx)(d,{visible:r,onClose:()=>c(!1),"data-sentry-element":"ProtectedSchemaModal","data-sentry-source-file":"ProtectedSchemaWarning.tsx"})]})}},7004:function(e,n,t){"use strict";t.d(n,{CG:function(){return f},FW:function(){return u},I7:function(){return x},Lc:function(){return g},Wv:function(){return j},_S:function(){return m},g$:function(){return p},gW:function(){return _},jX:function(){return h},q7:function(){return d},s_:function(){return c},tM:function(){return y},tU:function(){return o},ur:function(){return v},y:function(){return l}});var a=t(97458),s=t(52983),r=t(70559),i=t(5546);let l="mx-auto w-full max-w-[1200px]",c="px-4 md:px-6 lg:px-14 xl:px-24 2xl:px-28",o=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("header",{...s,ref:n,className:(0,i.cn)("w-full","flex-col gap-3 py-6",t)})}),d=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("h1",{ref:n,...s,className:(0,i.cn)("text-2xl",t)})}),u=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("span",{ref:n,...s,className:(0,i.cn)("text-sm text-foreground-light",t)})}),m=s.forwardRef((e,n)=>{let{className:t,bottomPadding:s,...o}=e,{aiAssistantPanel:d}=(0,r.WZ)(),{open:u}=d;return(0,a.jsx)("div",{ref:n,...o,className:(0,i.cn)(l,c,s&&"pb-16",u?"xl:px-6":"",t)})}),x=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:n,...s,className:(0,i.cn)("w-full h-px bg-border",t)})}),h=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:n,...s,className:(0,i.cn)("flex flex-col gap-3 py-6","lg:grid md:grid-cols-12 lg:py-12",t)})}),f=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:n,...s,className:(0,i.cn)("flex flex-col gap-3","min-w-[420px]",t)})}),p=s.forwardRef((e,n)=>{let{className:t,children:s,title:r,...l}=e;return(0,a.jsxs)("div",{ref:n,...l,className:(0,i.cn)("col-span-4 xl:col-span-5 prose text-sm",t),children:[r&&(0,a.jsx)("h2",{children:r}),s]})}),g=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:n,...s,className:(0,i.cn)("col-span-8 xl:col-span-7","flex flex-col gap-6",t)})}),y=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:n,...s,className:(0,i.cn)("flex flex-col gap-3 items-center",t)})}),j=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:n,...s,className:(0,i.cn)("flex w-full items-center",t)})}),v=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:n,...s,className:(0,i.cn)("flex flex-row gap-3",t)})}),_=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:n,...s,className:(0,i.cn)(l,c,"my-8 flex flex-col gap-8",t)})});o.displayName="ScaffoldHeader",d.displayName="ScaffoldTitle",u.displayName="ScaffoldDescription",m.displayName="ScaffoldContainer",x.displayName="ScaffoldDivider",h.displayName="ScaffoldSection",f.displayName="ScaffoldColumn",p.displayName="ScaffoldSectionDetail",g.displayName="ScaffoldSectionContent",y.displayName="ScaffoldFilterAndContent",j.displayName="ScaffoldActionsContainer",v.displayName="ScaffoldActionsGroup",_.displayName="ScaffoldContainerLegacy"},8504:function(e,n,t){"use strict";t.d(n,{p:function(){return i}});var a=t(97458),s=t(5546),r=t(26655);let i=e=>{let{title:n,description:t,docsUrl:i,actions:l,className:c}=e;return(0,a.jsxs)("div",{className:(0,s.cn)("mb-6 flex items-center justify-between gap-x-4 ".concat(c)),"data-sentry-component":"FormHeader","data-sentry-source-file":"FormHeader.tsx",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h3",{className:"text-foreground text-xl prose",children:n}),t&&(0,a.jsx)("div",{className:"prose text-sm max-w-full",children:t})]}),(0,a.jsxs)("div",{className:"flex items-center gap-x-2",children:[void 0!==i&&(0,a.jsx)(r.G,{href:i}),l]})]})}},26781:function(e,n,t){"use strict";var a=t(97458),s=t(1662),r=t(45196),i=t(81449),l=t(52983),c=t(198),o=t(20170),d=t(94784),u=t(87790),m=t(19168),x=t(71904),h=t(41341),f=t(88587),p=t(89861);n.Z=e=>{let{className:n,disabled:t=!1,size:g="tiny",showError:y=!0,selectedSchemaName:j,supportSelectAll:v=!1,excludedSchemas:_=[],onSelectSchema:b,onSelectCreateSchema:S}=e,[N,C]=(0,l.useState)(!1),q=(0,u.Xo)(c.KA.TENANT_SQL_ADMIN_WRITE,"schemas"),{project:w}=(0,o.d2)(),{data:E,isLoading:P,isSuccess:R,isError:I,error:k,refetch:Z}=(0,d.Q1)({projectRef:null==w?void 0:w.ref,connectionString:null==w?void 0:w.connectionString}),A=(E||[]).filter(e=>!_.includes(e.name)).sort((e,n)=>e.name.localeCompare(n.name));return(0,a.jsxs)("div",{className:n,"data-sentry-component":"SchemaSelector","data-sentry-source-file":"SchemaSelector.tsx",children:[P&&(0,a.jsx)(m.z,{type:"default",className:"justify-start",block:!0,size:g,loading:!0,children:"Loading schemas..."}),y&&I&&(0,a.jsxs)(x.bZ,{variant:"warning",className:"!px-3 !py-3",children:[(0,a.jsx)(x.Cd,{className:"text-xs text-amber-900",children:"Failed to load schemas"}),(0,a.jsxs)(x.X,{className:"text-xs mb-2 break-words",children:["Error: ",null==k?void 0:k.message]}),(0,a.jsx)(m.z,{type:"default",size:"tiny",onClick:()=>Z(),children:"Reload schemas"})]}),R&&(0,a.jsxs)(h.J2,{open:N,onOpenChange:C,modal:!1,children:[(0,a.jsx)(h.xo,{asChild:!0,children:(0,a.jsx)(m.z,{size:g,disabled:t,type:"default",className:"w-full [&>span]:w-full",iconRight:(0,a.jsx)(s.Z,{className:"text-foreground-muted",strokeWidth:2,size:14}),children:j?(0,a.jsxs)("div",{className:"w-full flex gap-1",children:[(0,a.jsx)("p",{className:"text-foreground-lighter",children:"schema:"}),(0,a.jsx)("p",{className:"text-foreground",children:"*"===j?"All schemas":j})]}):(0,a.jsx)("div",{className:"w-full flex gap-1",children:(0,a.jsx)("p",{className:"text-foreground-lighter",children:"Choose a schema…"})})})}),(0,a.jsx)(h.yk,{className:"p-0",side:"bottom",align:"start",sameWidthAsTrigger:!0,children:(0,a.jsxs)(f.mY,{children:[(0,a.jsx)(f.sZ,{placeholder:"Find schema..."}),(0,a.jsxs)(f.e8,{children:[(0,a.jsx)(f.rb,{children:"No schemas found"}),(0,a.jsx)(f.fu,{children:(0,a.jsxs)(p.x,{className:(A||[]).length>7?"h-[210px]":"",children:[v&&(0,a.jsxs)(f.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{b("*"),C(!1)},onClick:()=>{b("*"),C(!1)},children:[(0,a.jsx)("span",{children:"All schemas"}),"*"===j&&(0,a.jsx)(r.Z,{className:"text-brand",strokeWidth:2,size:16})]},"select-all"),null==A?void 0:A.map(e=>(0,a.jsxs)(f.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{b(e.name),C(!1)},onClick:()=>{b(e.name),C(!1)},children:[(0,a.jsx)("span",{children:e.name}),j===e.name&&(0,a.jsx)(r.Z,{className:"text-brand",strokeWidth:2,size:16})]},e.id))]})}),void 0!==S&&q&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.zz,{}),(0,a.jsx)(f.fu,{children:(0,a.jsxs)(f.di,{className:"cursor-pointer flex items-center gap-x-2 w-full",onSelect:()=>{S(),C(!1)},onClick:()=>{S(),C(!1)},children:[(0,a.jsx)(i.Z,{size:12}),"Create a new schema"]})})]})]})]})})]})]})}},46555:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return el}});var a=t(97458),s=t(2552),r=t(50663),i=t.n(r),l=t(71635),c=t.n(l),o=t(52983),d=t(34549),u=t(45925),m=t(20170),x=t(99658),h=t(61223),f=t(48855),p=t(26781),g=t(98261),y=t(28894),j=t(29020),v=t(30344);let _=e=>{let{schema:n}=e;return'\nSELECT schemaname as "schema",\n  tablename as "table",\n  indexname as "name",\n  indexdef as "definition"\nFROM pg_indexes\nWHERE schemaname = \''.concat(n,"';\n").trim()};async function b(e,n){let{schema:t,projectRef:a,connectionString:s}=e;if(!t)throw Error("schema is required");let r=_({schema:t}),{result:i}=await (0,j.R)({projectRef:a,connectionString:s,sql:r,queryKey:["indexes",t]},n);return i}let S=function(e){let{projectRef:n,connectionString:t,schema:a}=e,{enabled:s=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,y.a)(v.A.indexes(n,a),e=>{let{signal:s}=e;return b({projectRef:n,connectionString:t,schema:a},s)},{enabled:s&&void 0!==n&&void 0!==a,...r})};var N=t(94784),C=t(48442),q=t(10012),w=t(43428),E=t(71794),P=t(78854),R=t(17471),I=t(96789),k=t(19168),Z=t(86977),A=t(587),T=t(63635),L=t(36457),z=t(1662),F=t(45196),D=t(70437),$=t(37669),W=t.n($),M=t(85817),O=t(30751),G=t(41341),B=t(88587),V=t(89861),U=t(5546),H=t(84629),Q=t(74981),X=t(54720);let J=[{name:"B-Tree",value:"btree",description:"For querying data with equality or range conditions on columns.\nThis is the default index type that Postgres uses."},{name:"Hash",value:"hash",description:"For querying exact matches on columns"},{name:"GiST",value:"gist",description:"For querying complex data types or custom-defined operators"},{name:"SP-GiST",value:"spgist",description:"Similar to GiST, but is more specialized and customizable"},{name:"GIN",value:"gin",description:"For querying multi-valued data such as arrays or full-text search scenarios"},{name:"BRIN",value:"brin",description:"For querying large tables with sorted data"}];var Y=t(51735),K=t(61911),ee=t(26655),en=e=>{var n,t;let{visible:s,onClose:r}=e,i=(0,L.NL)(),{project:l}=(0,m.d2)(),c=(0,Y.Qv)(),[u,x]=(0,o.useState)("public"),[h,p]=(0,o.useState)(void 0),[y,j]=(0,o.useState)([]),[_,b]=(0,o.useState)(J[0].value),[S,q]=(0,o.useState)(!1),[w,E]=(0,o.useState)(!1),[P,R]=(0,o.useState)(""),{data:I}=(0,N.Q1)({projectRef:null==l?void 0:l.ref,connectionString:null==l?void 0:l.connectionString}),{data:A,isLoading:T}=(0,O.Hp)({schemas:[u],sort:"alphabetical",search:P,projectRef:null==l?void 0:l.ref,connectionString:null==l?void 0:l.connectionString}),{data:$,isLoading:en,isSuccess:et}=(0,M.Kz)({schema:u,table:h,projectRef:null==l?void 0:l.ref,connectionString:null==l?void 0:l.connectionString}),{mutate:ea,isLoading:es}=(0,C.r)({onSuccess:async()=>{await i.invalidateQueries(v.A.indexes(null==l?void 0:l.ref,u)),r(),d.Am.success("Successfully created index")},onError:e=>{d.Am.error("Failed to create index: ".concat(e.message))}}),er=(0,o.useMemo)(()=>(null==A?void 0:A.pages.flatMap(e=>e.data.entities))||[],[null==A?void 0:A.pages]);function ei(e){R(e)}let el=(null!==(t=null==$?void 0:null===(n=$[0])||void 0===n?void 0:n.columns)&&void 0!==t?t:[]).filter(e=>null!==e).map(e=>({id:e.attname,value:e.attname,name:e.attname,disabled:!1})),ec='\nCREATE INDEX ON "'.concat(u,'"."').concat(h,'" USING ').concat(_," (").concat(y.map(e=>'"'.concat(e,'"')).join(", "),");\n").trim(),eo=()=>{if(!l)return console.error("Project is required");ea({projectRef:l.ref,connectionString:l.connectionString,sql:ec})};(0,o.useEffect)(()=>{s&&(x("public"),p(""),j([]),b(J[0].value))},[s]),(0,o.useEffect)(()=>{p(""),j([]),b(J[0].value)},[u]),(0,o.useEffect)(()=>{j([]),b(J[0].value)},[h]);let ed=0===er.length;return(0,a.jsx)(Z.ZP,{size:"large",header:"Create new index",visible:s,onCancel:r,onConfirm:()=>eo(),loading:es,confirmText:"Create index","data-sentry-element":"SidePanel","data-sentry-component":"CreateIndexSidePanel","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsxs)("div",{className:"py-6 space-y-6",children:[(0,a.jsxs)(Z.ZP.Content,{className:"space-y-6","data-sentry-element":"unknown","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(X.E,{label:"Select a schema",name:"select-schema",isReactForm:!1,"data-sentry-element":"FormItemLayout","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsxs)(G.J2,{modal:!1,open:S,onOpenChange:q,"data-sentry-element":"Popover_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(G.xo,{asChild:!0,"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsx)(k.z,{type:"default",size:"medium",className:"w-full [&>span]:w-full text-left",iconRight:(0,a.jsx)(z.Z,{className:"text-foreground-muted",strokeWidth:2,size:14}),"data-sentry-element":"Button","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:void 0!==u&&""!==u?u:"Choose a schema"})}),(0,a.jsx)(G.yk,{className:"p-0",side:"bottom",align:"start",sameWidthAsTrigger:!0,"data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsxs)(B.mY,{"data-sentry-element":"Command_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(B.sZ,{placeholder:"Find table...",value:P,onValueChange:ei,"data-sentry-element":"CommandInput_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx"}),(0,a.jsxs)(B.e8,{"data-sentry-element":"CommandList_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(B.rb,{"data-sentry-element":"CommandEmpty_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:"No schemas found"}),(0,a.jsx)(B.fu,{"data-sentry-element":"CommandGroup_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsx)(V.x,{className:(I||[]).length>7?"h-[210px]":"","data-sentry-element":"ScrollArea","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(null!=I?I:[]).map(e=>(0,a.jsxs)(B.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{x(e.name),q(!1)},onClick:()=>{x(e.name),q(!1)},children:[(0,a.jsx)("span",{children:e.name}),h===e.name&&(0,a.jsx)(F.Z,{className:"text-brand",strokeWidth:2,size:16})]},e.name))})})]})]})})]})}),(0,a.jsx)(X.E,{label:"Select a table",name:"select-table",description:ed&&!T&&"Create a table in this schema via the Table or SQL editor first",isReactForm:!1,"data-sentry-element":"FormItemLayout","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsxs)(G.J2,{modal:!1,open:w,onOpenChange:E,"data-sentry-element":"Popover_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(G.xo,{asChild:!0,disabled:ed||T,"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsx)(k.z,{type:"default",size:"medium",className:(0,U.cn)("w-full [&>span]:w-full text-left",""===h&&"text-foreground-lighter"),iconRight:(0,a.jsx)(z.Z,{className:"text-foreground-muted",strokeWidth:2,size:14}),"data-sentry-element":"Button","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:void 0!==h&&""!==h?h:ed?"No tables available in schema":"Choose a table"})}),(0,a.jsx)(G.yk,{className:"p-0",side:"bottom",align:"start",sameWidthAsTrigger:!0,"data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsxs)(B.mY,{shouldFilter:!1,"data-sentry-element":"Command_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(B.sZ,{placeholder:"Find table...",value:P,onValueChange:ei,"data-sentry-element":"CommandInput_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx"}),(0,a.jsxs)(B.e8,{"data-sentry-element":"CommandList_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(B.rb,{"data-sentry-element":"CommandEmpty_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:T?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-center justify-center",children:[(0,a.jsx)(D.Z,{size:12,className:"animate-spin"}),"Loading..."]}):"No tables found"}),(0,a.jsx)(B.fu,{"data-sentry-element":"CommandGroup_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsx)(V.x,{className:(er||[]).length>7?"h-[210px]":"","data-sentry-element":"ScrollArea","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(null!=er?er:[]).map(e=>(0,a.jsxs)(B.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{p(e.name),E(!1)},onClick:()=>{p(e.name),E(!1)},children:[(0,a.jsx)("span",{children:e.name}),h===e.name&&(0,a.jsx)(F.Z,{className:"text-brand",strokeWidth:2,size:16})]},e.name))})})]})]})})]})}),h&&(0,a.jsxs)(X.E,{label:"Select up to 32 columns",isReactForm:!1,children:[en&&(0,a.jsx)(g.Z,{className:"py-4"}),et&&(0,a.jsx)(Q.m,{options:el,placeholder:"Choose which columns to create an index on",searchPlaceholder:"Search for a column",value:y,onChange:j})]})]}),y.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Z.ZP.Separator,{}),(0,a.jsxs)(Z.ZP.Content,{className:"space-y-6",children:[(0,a.jsx)(X.E,{label:"Select an index type",name:"selected-index-type",isReactForm:!1,children:(0,a.jsxs)(H.Ph,{disabled:c,value:_,onValueChange:b,name:"selected-index-type",children:[(0,a.jsx)(H.i4,{size:"small",children:(0,a.jsx)(H.ki,{className:"font-mono",children:_})}),(0,a.jsx)(H.Bw,{children:J.map((e,n)=>(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)(H.Ql,{value:e.value,children:(0,a.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,a.jsx)("span",{children:e.name}),e.description.split("\n").map((n,t)=>(0,a.jsx)("span",{className:"text-foreground-lighter group-focus:text-foreground-light group-data-[state=checked]:text-foreground-light",children:n},"".concat(e.value,"-description-").concat(t)))]})}),n<J.length-1&&(0,a.jsx)(H.U$,{})]},e.name))})]})}),c&&(0,a.jsx)(K.J,{type:"default",className:"!mt-2",title:"OrioleDB currently only supports the B-tree index type",description:"More index types may be supported when OrioleDB is no longer in preview",children:(0,a.jsx)(ee.G,{className:"mt-2",abbrev:!1,href:"https://supabase.com/docs"})})]}),(0,a.jsx)(Z.ZP.Separator,{}),(0,a.jsx)(Z.ZP.Content,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-sm",children:"Preview of SQL statement"}),(0,a.jsx)(k.z,{asChild:!0,type:"default",children:(0,a.jsx)(W(),{href:void 0!==l?"/project/".concat(l.ref,"/sql/new?content=").concat(ec):"/",children:"Open in SQL Editor"})})]})}),(0,a.jsx)("div",{className:"h-[200px] !mt-2",children:(0,a.jsx)("div",{className:"relative h-full",children:(0,a.jsx)(f.Z,{isReadOnly:!0,autofocus:!1,id:"".concat(u,"-").concat(h,"-").concat(y.join(","),"-").concat(_),language:"pgsql",defaultValue:ec})})})]})]})})},et=()=>{var e,n;let{project:t}=(0,m.d2)(),{schema:s,table:r}=(0,u.UO)(),[l,y]=(0,o.useState)(""),{selectedSchema:j,setSelectedSchema:v}=(0,q.B)(),[_,b]=(0,o.useState)(!1),[L,z]=(0,o.useState)(),[F,D]=(0,o.useState)(),{data:$,refetch:W,error:M,isLoading:O,isSuccess:G,isError:B}=S({schema:j,projectRef:null==t?void 0:t.ref,connectionString:null==t?void 0:t.connectionString}),{data:V,isLoading:U,isSuccess:H,isError:Q}=(0,N.Q1)({projectRef:null==t?void 0:t.ref,connectionString:null==t?void 0:t.connectionString}),{mutate:X,isLoading:J}=(0,C.r)({onSuccess:async()=>{await W(),D(void 0),d.Am.success("Successfully deleted index")},onError:e=>{d.Am.error("Failed to delete index: ".concat(e.message))}}),[Y]=i()(null!=V?V:[],e=>{var n;return w.s.includes(null!==(n=null==e?void 0:e.name)&&void 0!==n?n:"")}),K=null==V?void 0:V.find(e=>e.name===j),ee=Y.some(e=>e.id===(null==K?void 0:K.id)),et=c()(null!=$?$:[],e=>e.name.toLocaleLowerCase()),ea=l.length>0?et.filter(e=>e.name.includes(l)||e.table.includes(l)):et,es=e=>{if(!t)return console.error("Project is required");X({projectRef:t.ref,connectionString:t.connectionString,sql:'drop index if exists "'.concat(e.name,'"')})};return(0,o.useEffect)(()=>{if(void 0!==s){let e=null==V?void 0:V.find(e=>e.name===s);void 0!==e&&v(e.name)}},[s,H]),(0,o.useEffect)(()=>{void 0!==r&&y(r)},[r]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"pb-8",children:(0,a.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[U&&(0,a.jsx)(g.Z,{className:"w-[260px]"}),Q&&(0,a.jsxs)("div",{className:"w-[260px] text-foreground-light text-sm border px-3 py-1.5 rounded flex items-center space-x-2",children:[(0,a.jsx)(E.Z,{strokeWidth:2,size:16}),(0,a.jsx)("p",{children:"Failed to load schemas"})]}),H&&(0,a.jsx)(p.Z,{className:"w-[180px]",size:"tiny",showError:!1,selectedSchemaName:j,onSelectSchema:v}),(0,a.jsx)(I.Z,{size:"tiny",value:l,className:"w-52",onChange:e=>y(e.target.value),placeholder:"Search for an index",icon:(0,a.jsx)(P.Z,{size:14}),"data-sentry-element":"Input","data-sentry-source-file":"Indexes.tsx"}),!ee&&(0,a.jsx)(k.z,{className:"ml-auto",type:"primary",onClick:()=>b(!0),disabled:!H,children:"Create index"})]}),ee&&(0,a.jsx)(T.Z,{schema:j,entity:"indexes"}),O&&(0,a.jsx)(g.A,{}),B&&(0,a.jsx)(h.Z,{error:M,subject:"Failed to retrieve database indexes"}),G&&(0,a.jsx)(x.Z,{head:[(0,a.jsx)(x.Z.th,{children:"Schema"},"schema"),(0,a.jsx)(x.Z.th,{children:"Table"},"table"),(0,a.jsx)(x.Z.th,{children:"Name"},"name"),(0,a.jsx)(x.Z.th,{},"buttons")],body:(0,a.jsxs)(a.Fragment,{children:[0===et.length&&0===l.length&&(0,a.jsx)(x.Z.tr,{children:(0,a.jsxs)(x.Z.td,{colSpan:4,children:[(0,a.jsx)("p",{className:"text-sm text-foreground",children:"No indexes created yet"}),(0,a.jsxs)("p",{className:"text-sm text-foreground-light",children:['There are no indexes found in the schema "',j,'"']})]})}),0===et.length&&l.length>0&&(0,a.jsx)(x.Z.tr,{children:(0,a.jsxs)(x.Z.td,{colSpan:4,children:[(0,a.jsx)("p",{className:"text-sm text-foreground",children:"No results found"}),(0,a.jsxs)("p",{className:"text-sm text-foreground-light",children:['Your search for "',l,'" did not return any results']})]})}),ea.length>0&&ea.map(e=>(0,a.jsxs)(x.Z.tr,{children:[(0,a.jsx)(x.Z.td,{children:(0,a.jsx)("p",{title:e.schema,children:e.schema})}),(0,a.jsx)(x.Z.td,{children:(0,a.jsx)("p",{title:e.table,children:e.table})}),(0,a.jsx)(x.Z.td,{children:(0,a.jsx)("p",{title:e.name,children:e.name})}),(0,a.jsx)(x.Z.td,{children:(0,a.jsxs)("div",{className:"flex justify-end items-center space-x-2",children:[(0,a.jsx)(k.z,{type:"default",onClick:()=>z(e),children:"View definition"}),!ee&&(0,a.jsx)(k.z,{type:"text",className:"px-1",icon:(0,a.jsx)(R.Z,{}),onClick:()=>D(e)})]})})]},e.name))]})})]})}),(0,a.jsx)(Z.ZP,{size:"xlarge",visible:void 0!==L,header:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"Index:"}),(0,a.jsx)("code",{className:"text-sm ml-2",children:null==L?void 0:L.name})]}),onCancel:()=>z(void 0),"data-sentry-element":"SidePanel","data-sentry-source-file":"Indexes.tsx",children:(0,a.jsx)("div",{className:"h-full",children:(0,a.jsx)("div",{className:"relative h-full",children:(0,a.jsx)(f.Z,{isReadOnly:!0,id:null!==(e=null==L?void 0:L.name)&&void 0!==e?e:"",language:"pgsql",defaultValue:null!==(n=null==L?void 0:L.definition)&&void 0!==n?n:"","data-sentry-element":"CodeEditor","data-sentry-source-file":"Indexes.tsx"})})})}),(0,a.jsx)(en,{visible:_,onClose:()=>b(!1),"data-sentry-element":"CreateIndexSidePanel","data-sentry-source-file":"Indexes.tsx"}),(0,a.jsx)(A.Z,{variant:"warning",size:"medium",loading:J,visible:void 0!==F,title:(0,a.jsxs)(a.Fragment,{children:["Confirm to delete index ",(0,a.jsx)("code",{className:"text-sm",children:null==F?void 0:F.name})]}),confirmLabel:"Confirm delete",confirmLabelLoading:"Deleting...",onConfirm:()=>void 0!==F?es(F):{},onCancel:()=>D(void 0),alert:{title:"This action cannot be undone",description:"Deleting an index that is still in use will cause queries to slow down, and in some cases causing significant performance issues."},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"Indexes.tsx",children:(0,a.jsx)("ul",{className:"mt-4 space-y-5",children:(0,a.jsx)("li",{className:"flex gap-3",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{className:"text-sm",children:"Before deleting this index, consider:"}),(0,a.jsxs)("ul",{className:"space-y-2 mt-2 text-sm text-foreground-light",children:[(0,a.jsx)("li",{className:"list-disc ml-6",children:"This index is no longer in use"}),(0,a.jsx)("li",{className:"list-disc ml-6",children:"The table which the index is on is not currently in use, as dropping an index requires a short exclusive access lock on the table."})]})]})})})})]})},ea=t(69019),es=t(7004),er=t(8504);let ei=()=>(0,a.jsx)(es._S,{"data-sentry-element":"ScaffoldContainer","data-sentry-component":"IndexesPage","data-sentry-source-file":"indexes.tsx",children:(0,a.jsxs)(es.jX,{"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"indexes.tsx",children:[(0,a.jsx)(es.Lc,{className:"gap-0","data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"indexes.tsx",children:(0,a.jsx)(er.p,{className:"!mb-0",title:"Database Indexes",description:"Improve query performance against your database","data-sentry-element":"FormHeader","data-sentry-source-file":"indexes.tsx"})}),(0,a.jsxs)(es.g$,{className:"flex items-center justify-end gap-2 flex-wrap","data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"indexes.tsx",children:[(0,a.jsx)(ee.G,{className:"no-underline",href:"https://supabase.com/docs/guides/database/query-optimization","data-sentry-element":"DocsButton","data-sentry-source-file":"indexes.tsx"}),(0,a.jsx)(k.z,{asChild:!0,type:"default",icon:(0,a.jsx)(s.Z,{strokeWidth:1.5}),"data-sentry-element":"Button","data-sentry-source-file":"indexes.tsx",children:(0,a.jsx)("a",{target:"_blank",rel:"noreferrer",className:"no-underline",href:"https://supabase.com/docs/guides/database/extensions/index_advisor",children:"Index Advisor"})})]}),(0,a.jsx)("div",{className:"col-span-12 mt-3",children:(0,a.jsx)(et,{"data-sentry-element":"Indexes","data-sentry-source-file":"indexes.tsx"})})]})});ei.getLayout=e=>(0,a.jsx)(ea.Z,{title:"Indexes",children:e});var el=ei},78986:function(e,n,t){"use strict";t.d(n,{H:function(){return r},a:function(){return i}});var a=t(97458),s=t(14415);let r=e=>{let{name:n}=e;return(0,a.jsx)("div",{className:"text-typography-body-light [[data-theme*=dark]_&]:text-typography-body-dark flex cursor-not-allowed items-center space-x-2 rounded bg-gray-600 py-0.5 px-2 text-sm","data-sentry-component":"BadgeDisabled","data-sentry-source-file":"Badges.tsx",children:(0,a.jsx)("span",{className:"opacity-50",children:n})})},i=e=>{let{name:n,handleRemove:t}=e;return(0,a.jsxs)("div",{className:"text-typography-body-light [[data-theme*=dark]_&]:text-typography-body-dark flex items-center space-x-2 rounded bg-surface-300 py-0.5 px-2 text-sm",onClick:e=>e.preventDefault(),"data-sentry-component":"BadgeSelected","data-sentry-source-file":"Badges.tsx",children:[(0,a.jsx)("span",{children:n}),(0,a.jsx)(s.Z,{size:12,className:"cursor-pointer opacity-50 transition hover:opacity-100",onClick:e=>{e.preventDefault(),e.stopPropagation(),t()},"data-sentry-element":"X","data-sentry-source-file":"Badges.tsx"})]})}},74981:function(e,n,t){"use strict";t.d(n,{m:function(){return p}});var a=t(97458),s=t(40916),r=t.n(s),i=t(92238),l=t.n(i),c=t(63204),o=t(45196),d=t(52983),u=t(41341),m=t(5546),x=t(88587),h=t(89861),f=t(78986);let p=e=>{let{options:n,value:t,placeholder:s,searchPlaceholder:i="Search for option",disabled:p=!1,onChange:g=()=>{}}=e,[y,j]=(0,d.useState)(!1),[v,_]=(0,d.useState)(t||[]),b=t||v,S=r()(n,["disabled"],["desc"]),N=e=>void 0!==(b||[]).find(n=>n===e.value),C=e=>{let t=N(e)?[...l()(b,e.value)]:[...b.concat([e.value])],a=n.filter(e=>e.disabled).map(e=>e.name),s=[...new Set(t.concat(a))];_(s),g(s)};return(0,a.jsx)("div",{className:p?"pointer-events-none opacity-50":"","data-sentry-component":"MultiSelectV2","data-sentry-source-file":"MultiSelectV2.tsx",children:(0,a.jsxs)(u.J2,{open:y,onOpenChange:j,modal:!1,"data-sentry-element":"Popover_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:[(0,a.jsx)(u.xo,{asChild:!0,"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:(0,a.jsxs)("div",{className:(0,m.cn)("relative border border-strong bg-control rounded","flex w-full flex-wrap items-start gap-1.5 p-1.5 cursor-pointer","".concat(0===b.length?"h-9":"")),onClick:()=>j(!0),children:[0===b.length&&s&&(0,a.jsx)("div",{className:"px-2 text-sm text-foreground-light h-full flex items-center",children:s}),b.map((e,n)=>{var t;let s="".concat(e,"-").concat(n),r=S.find(n=>n.value===e),i=null!==(t=null==r?void 0:r.disabled)&&void 0!==t&&t;return r?i?(0,a.jsx)(f.H,{name:r.name},s):(0,a.jsx)(f.a,{name:r.name,handleRemove:()=>C(r)},s):(0,a.jsx)(a.Fragment,{})}),(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 pl-3 pr-2 flex space-x-1 items-center cursor-pointer ",children:(0,a.jsx)(c.Z,{size:16,strokeWidth:2,className:"text-foreground-lighter","data-sentry-element":"ChevronDown","data-sentry-source-file":"MultiSelectV2.tsx"})})]})}),(0,a.jsx)(u.yk,{className:"p-0 w-96 border-strong",side:"bottom",align:"start","data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:(0,a.jsxs)(x.mY,{"data-sentry-element":"Command_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:[(0,a.jsx)(x.sZ,{placeholder:i,"data-sentry-element":"CommandInput_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx"}),(0,a.jsxs)(x.e8,{"data-sentry-element":"CommandList_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:[(0,a.jsx)(x.rb,{"data-sentry-element":"CommandEmpty_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:"No options found"}),(0,a.jsx)(x.fu,{"data-sentry-element":"CommandGroup_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:(0,a.jsx)(h.x,{className:(0,m.cn)(S.length>7?"h-[210px]":""),"data-sentry-element":"ScrollArea","data-sentry-source-file":"MultiSelectV2.tsx",children:null==S?void 0:S.map(e=>{let n=!!(b&&b.find(n=>n===e.value));return(0,a.jsx)(x.di,{value:e.value,className:"cursor-pointer w-full",onClick:()=>C(e),onSelect:()=>C(e),children:(0,a.jsxs)("div",{className:"w-full flex items-center justify-between",children:[e.name,n&&(0,a.jsx)(o.Z,{size:14})]})},e.id)})})})]})]})})]})})}}},function(e){e.O(0,[1885,588,520,2597,8703,9505,3351,6019,7191,2594,175,659,2829,5294,5313,5970,5538,9885,495,7546,6064,111,5394,7687,9774,2888,179],function(){return e(e.s=85740)}),_N_E=e.O()}]);